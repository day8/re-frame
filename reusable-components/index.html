


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Derived data, flowing">
      
      
        <link rel="canonical" href="https://day8.github.io/re-frame/reusable-components/">
      
      
        <meta name="author" content="Mike Thompson">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
    
    <title>Reusable Components</title>
    

    
      <link rel="stylesheet" href="../assets/stylesheets/main.a676eddb.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.b302131d.min.css">
      
      
        
        
        <meta name="theme-color" content="#03a9f4">
      
    
    
    

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Segoe+UI",+"Open+Sans:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>body,input{font-family:"Segoe UI", "Open Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Source Code Pro",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300&display=swap">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&display=swap">
    
      <link rel="stylesheet" href="../stylesheets/dominoes-live.css">
    
      <link rel="stylesheet" href="../stylesheets/codehilite-monokai.css">
    
      <link rel="stylesheet" href="../stylesheets/mkdocs.css">
    
    
      
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="light-blue" data-md-color-accent="blue">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-essence-of-a-component" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header-nav md-grid" aria-label="Header">

    <!-- Link to home -->
    <a
      href="https://day8.github.io/re-frame/"
      title="re-frame"
      class="md-header-nav__button md-logo"
      aria-label="re-frame"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" /></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>

    <!-- Header title -->
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            re-frame
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Reusable Components
            
          </span>
        </div>
      
    </div>

    <!-- Button to open search dialogue -->
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>

      <!-- Search interface -->
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository containing source -->
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../re-frame/" class="md-tabs__link md-tabs__link--active">
          Docs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../FAQs/Inspecting-app-db/" class="md-tabs__link">
          FAQs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api-intro/" class="md-tabs__link">
          API
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../releases/2020/" class="md-tabs__link">
          Releases
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../External-Resources/" class="md-tabs__link">
          Resources
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://day8.github.io/re-frame/" title="re-frame" class="md-nav__button md-logo" aria-label="re-frame">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" /></svg>

    </a>
    re-frame
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Docs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docs" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../re-frame/" title="re-frame" class="md-nav__link">
      re-frame
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      THE BASICS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="THE BASICS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        THE BASICS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../a-loop/" title="A Data Loop" class="md-nav__link">
      A Data Loop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../application-state/" title="State" class="md-nav__link">
      State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-30k/" title="Code" class="md-nav__link">
      Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event-handling-infographic/" title="Infographics" class="md-nav__link">
      Infographics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../subscriptions/" title="Subscriptions" class="md-nav__link">
      Subscriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-live/" title="Live" class="md-nav__link">
      Live
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      INTERMEDIATE 2 & 3
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 2 & 3" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        INTERMEDIATE 2 & 3
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../EffectfulHandlers/" title="Effectful Handlers" class="md-nav__link">
      Effectful Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Interceptors/" title="Interceptors" class="md-nav__link">
      Interceptors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Effects/" title="Effects" class="md-nav__link">
      Effects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Coeffects/" title="Coeffects" class="md-nav__link">
      Coeffects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../review-todomvc/" title="Review TodoMVC" class="md-nav__link">
      Review TodoMVC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      INTERMEDIATE 4,5 & 6
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 4,5 & 6" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        INTERMEDIATE 4,5 & 6
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../correcting-a-wrong/" title="Correcting a wrong" class="md-nav__link">
      Correcting a wrong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flow-mechanics/" title="Flow Mechanics" class="md-nav__link">
      Flow Mechanics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../start-coding/" title="START CODING" class="md-nav__link">
      START CODING
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      MENTAL MODEL OMNIBUS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MENTAL MODEL OMNIBUS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        MENTAL MODEL OMNIBUS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../all-models-are-wrong/" title="Other Models" class="md-nav__link">
      Other Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../on-dynamics/" title="On Dynamics" class="md-nav__link">
      On Dynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-oriented-design/" title="Data Oriented Design" class="md-nav__link">
      Data Oriented Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../interconnections/" title="Interconnections" class="md-nav__link">
      Interconnections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../historical/" title="Historical" class="md-nav__link">
      Historical
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7" checked>
    
    <label class="md-nav__link" for="nav-2-7">
      MORE ADVANCED
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MORE ADVANCED" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        MORE ADVANCED
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-dynamics/" title="Browser Dynamics" class="md-nav__link">
      Browser Dynamics
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Reusable Components
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Reusable Components" class="md-nav__link md-nav__link--active">
      Reusable Components
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-essence-of-a-component" class="md-nav__link">
    The Essence Of A Component
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reagent-components" class="md-nav__link">
    Reagent Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-frame-components" class="md-nav__link">
    re-frame components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#many-instances" class="md-nav__link">
    Many Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-identity" class="md-nav__link">
    What Is Identity?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-identity" class="md-nav__link">
    Providing Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-identities" class="md-nav__link">
    Multiple Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#derived-identities" class="md-nav__link">
    Derived Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-unit-of-reuse" class="md-nav__link">
    The Unit Of Reuse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    Implications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#independent-from-place" class="md-nav__link">
    Independent From "Place"
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../App-Structure/" title="App Structure" class="md-nav__link">
      App Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Loading-Initial-Data/" title="Loading Initial Data" class="md-nav__link">
      Loading Initial Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Talking-To-Servers/" title="Talking To Servers" class="md-nav__link">
      Talking To Servers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Subscribing-To-External-Data/" title="Subscribing to External Data" class="md-nav__link">
      Subscribing to External Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Debugging/" title="Debugging" class="md-nav__link">
      Debugging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Performance-Problems/" title="Eek! Performance Problems" class="md-nav__link">
      Eek! Performance Problems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solve-the-CPU-hog-problem/" title="Solve the CPU hog problem" class="md-nav__link">
      Solve the CPU hog problem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Using-Stateful-JS-Components/" title="Using Stateful JS Components" class="md-nav__link">
      Using Stateful JS Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../The-re-frame-logo/" title="The Logo Backstory" class="md-nav__link">
      The Logo Backstory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      FAQs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="FAQs" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        FAQs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Inspecting-app-db/" title="How can I Inspect app-db?" class="md-nav__link">
      How can I Inspect app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/LoadOnMount/" title="How Do I Load On Mount?" class="md-nav__link">
      How Do I Load On Mount?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DoINeedReFrame/" title="Reagent looks terrific. Why do I need re-frame?" class="md-nav__link">
      Reagent looks terrific. Why do I need re-frame?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FocusOnElement/" title="How to focus on an HTML element" class="md-nav__link">
      How to focus on an HTML element
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/GlobalInterceptors/" title="How do I register a global interceptor" class="md-nav__link">
      How do I register a global interceptor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/laggy-input/" title="Why is my input field laggy?" class="md-nav__link">
      Why is my input field laggy?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/When-Does-Dispatch-Happen/" title="How long after I do a dispatch does the event get handled?" class="md-nav__link">
      How long after I do a dispatch does the event get handled?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/UseASubscriptionInAnEventHandler/" title="How can I use a subscription in an Event Handler" class="md-nav__link">
      How can I use a subscription in an Event Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Logging/" title="How do I use logging method X" class="md-nav__link">
      How do I use logging method X
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Null-Dispatched-Events/" title="Dispatched Events Are Null" class="md-nav__link">
      Dispatched Events Are Null
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-Clear-Sub-Cache/" title="Why do we need to clear the subscription cache when reloading with Figwheel?" class="md-nav__link">
      Why do we need to clear the subscription cache when reloading with Figwheel?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/CatchingEventExceptions/" title="How can I detect exceptions in Event Handlers?" class="md-nav__link">
      How can I detect exceptions in Event Handlers?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/PollADatabaseEvery60/" title="How do I turn on/off polling a database every 60 secs" class="md-nav__link">
      How do I turn on/off polling a database every 60 secs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/ViewsOnGlobalRegistration/" title="re-frame uses side-effecting registrations. Should I feel dirty?" class="md-nav__link">
      re-frame uses side-effecting registrations. Should I feel dirty?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-CLJC/" title="Why is re-frame implemented in `.cljc` files" class="md-nav__link">
      Why is re-frame implemented in `.cljc` files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DB_Normalisation/" title="How do I store normalised data in app-db?" class="md-nav__link">
      How do I store normalised data in app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FullStackReframe/" title="How do I do full-stack re-frame?" class="md-nav__link">
      How do I do full-stack re-frame?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api-intro/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-builtin-effects/" title="Builtin Effects" class="md-nav__link">
      Builtin Effects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-re-frame.core/" title="re-frame.core" class="md-nav__link">
      re-frame.core
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Releases
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Releases" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2020/" title="2020" class="md-nav__link">
      2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2019/" title="2019" class="md-nav__link">
      2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2018/" title="2018" class="md-nav__link">
      2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2017/" title="2017" class="md-nav__link">
      2017
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2016/" title="2016" class="md-nav__link">
      2016
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2015/" title="2015" class="md-nav__link">
      2015
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Resources
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Resources" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../External-Resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-essence-of-a-component" class="md-nav__link">
    The Essence Of A Component
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reagent-components" class="md-nav__link">
    Reagent Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-frame-components" class="md-nav__link">
    re-frame components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#many-instances" class="md-nav__link">
    Many Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-identity" class="md-nav__link">
    What Is Identity?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#providing-identity" class="md-nav__link">
    Providing Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-identities" class="md-nav__link">
    Multiple Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#derived-identities" class="md-nav__link">
    Derived Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-unit-of-reuse" class="md-nav__link">
    The Unit Of Reuse
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    Implications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#independent-from-place" class="md-nav__link">
    Independent From "Place"
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/day8/re-frame/edit/master/docs/reusable-components.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                  <h1>Reusable Components</h1>
                
                <p>There are two kinds of Components:</p>
<ul>
<li><strong>Plain Reagent Components</strong></li>
<li><strong>re-frame Components</strong></li>
</ul>
<p>Roughly speaking, <code>Reagent Components</code> are useful for the simple, individual widgets and  <code>re-frame Components</code> for larger widget complexes. </p>
<h2 id="the-essence-of-a-component">The Essence Of A Component<a class="headerlink" href="#the-essence-of-a-component" title="Permanent link">&para;</a></h2>
<p>All Components have:
  - two responsibilities
  - and two associated needs</p>
<p>The two responsibilities are:</p>
<ol>
<li>
<p><strong>rendering</strong>:</p>
<ul>
<li>provide a way for the user to observe a value. That value could be as simple as a string, or as complicated as an entire Pivot Table. </li>
<li>optionally, show editing affordances to facilitate user modification of the value.
  A spinner supplies up/down buttons. A text input draws a box and has subtle colour
  changes on mouse-over to imply editability, 
  and, of course, a "click" will initiate editing. Or the value could be a complete 
  Pivot Table component which allows the user to drag "dimention fields" to certain destinations 
  to indicate how rollups should happen. </li>
</ul>
</li>
<li>
<p><strong>communicate  user intent</strong>: if the user modifies the value, communicate the user's intent
   to the surrounding app. Sometimes it is as simple as the user clicking the spinners "up" value,
   other times the modification might be the user dragging and dropping a "dimension" in a pivot table.</p>
</li>
</ol>
<p>To fulfil these two responsibilities, Components have <strong>two requirements</strong>:</p>
<ol>
<li>a way to get <code>the value</code>  (input)</li>
<li>a way to communicate events which represent <code>user intent</code> (output)</li>
</ol>
<p>So, a Component takes <code>a value</code> as input (possibly a complicated value) and it produces a stream of events as output. 
One requirement is <code>I</code> in nature, and the other is <code>O</code> in nature, so not surprisingly, we 
describe them collectively as the Component's <strong>I/O requirements</strong>.  </p>
<h2 id="reagent-components">Reagent Components<a class="headerlink" href="#reagent-components" title="Permanent link">&para;</a></h2>
<p>The simplest Components are <strong>Widgets</strong> which represent a single value like an integer, string or selection.</p>
<p>They are easily created from base HTML elements, like <code>&lt;input&gt;</code> or <code>&lt;select&gt;</code>, 
or there are libraries like <code>re-com</code> which has dropdowns, Text Input fields 
and radio buttons.</p>
<p>You can create these Components using only <strong>Reagent</strong> (no re-frame) and,
for that reason they are called <code>Reagent Components</code>. Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">simple-text-input</span>
  <span class="p">[</span><span class="nv">value</span> <span class="nv">callback-fn</span><span class="p">]</span>
  <span class="p">[</span><span class="ss">:input</span> 
   <span class="p">{</span><span class="ss">:type</span>      <span class="s">&quot;text&quot;</span>
    <span class="ss">:value</span>     <span class="nv">value</span>                                     <span class="c1">;; initial value</span>
    <span class="ss">:on-change</span> <span class="o">#</span><span class="p">(</span><span class="nf">callback-fn</span> <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">%</span> <span class="nv">.-target</span> <span class="nv">.-value</span><span class="p">))}])</span> <span class="c1">;; callback with value</span>
</code></pre></div>


<p>You'll notice that the <strong>I/O requirements</strong> of this Component, are satisfied by the two arguments:</p>
<ol>
<li>a value  (input)</li>
<li>a callback function (a means of communicating the user's intent to change the value). </li>
</ol>
<p>Because both needs are satisfied via arguments, this Component is quite reusable. It works for any string value.</p>
<h2 id="re-frame-components">re-frame components<a class="headerlink" href="#re-frame-components" title="Permanent link">&para;</a></h2>
<p>What defines a <code>re-frame component</code> is that it uses <code>dispatch</code> and <code>subscribe</code> to satisfy its <strong>I/O requirements</strong>:</p>
<ul>
<li><code>subscribe</code> is used to obtain values</li>
<li>and <code>dispatch</code> is used to communicate events carrying user intent</li>
</ul>
<p>re-frame Components tend to be larger. They often represent  <strong>an entire entity</strong>
(not just a single, simple value) and they will probably involve a "complex of widgets"
with a cohesive purpose. </p>
<p>Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-names</span>
  <span class="p">[</span><span class="nv">id</span><span class="p">]</span>                                                   <span class="c1">;; customer id</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">customer</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span> <span class="nv">id</span><span class="p">])]</span>            <span class="c1">;; obtain the value</span>
    <span class="p">[</span><span class="ss">:div</span> <span class="s">&quot;Name:&quot;</span>

      <span class="c1">; first name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:first-name</span> <span class="nv">customer</span><span class="p">)</span>                             <span class="c1">;; obtain first-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="nv">id</span> <span class="ss">:first-name</span> <span class="nv">%</span><span class="p">])]</span>   <span class="c1">;; first name changed</span>

       <span class="c1">;; last name</span>
       <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:last-name</span> <span class="nv">customer</span><span class="p">)</span>                              <span class="c1">;; obtain last-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="nv">id</span> <span class="ss">:last-name</span> <span class="nv">%</span><span class="p">])]]))</span> <span class="c1">;; last name changed</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>This is a <code>re-frame Component</code> because it uses <code>subscribe</code> and <code>dispatch</code> for I/O</li>
<li>It composes two Reagent sub-components - the reusable <code>simple-text-input</code> component we created above</li>
<li>It parameterises the I/O for the sub-components by passing in a value and a callback to each</li>
</ul>
<h2 id="many-instances">Many Instances<a class="headerlink" href="#many-instances" title="Permanent link">&para;</a></h2>
<p>But this raises a question ... if an application displays multiple 
instances of a <code>re-frame Component</code>, how do these instances <code>subscribe</code> to their specific value?</p>
<p>One component instance might represent entity <code>A</code>, and another might represent entity <code>B</code>. </p>
<p>To do its job, the instance representing <code>A</code> must subscribe to the <code>value</code> representing <code>A</code>. So how how does it do that? 
How is <code>subscribe</code> used?  And the same for the component instance 
representing <code>B</code>.</p>
<p>The Answer: </p>
<ul>
<li>instances of a reusable re-frame Component must be supplied with  the <strong>identity</strong> of the entity they should represent.</li>
<li>this <code>identity</code> will be directly supplied as an argument  (typically). If you look back at example above, you'll see that argument is called <code>id</code>.</li>
<li>a component will use this <code>identity</code> within the query vector given to <code>subscribe</code> - so the query is parameterised by the <code>identity</code></li>
<li>the subscription handler will know how to use this <code>identity</code> to obtain the entity's value</li>
</ul>
<p>And the, later, <code>O</code> bit: 
- the events <code>dispatched</code> will (typically) also include this <code>identity</code><br />
- the event handler will know how to use this identity to modify the right part of <code>app-db</code></p>
<h2 id="what-is-identity">What Is Identity?<a class="headerlink" href="#what-is-identity" title="Permanent link">&para;</a></h2>
<p>An <code>identity</code> is anything which can be used to distinguish one entity from another - something which distinguishes <code>A</code> from <code>B</code>.</p>
<p>In a different technology stack, it might be called "a pointer" or "a reference" or "a unique key". </p>
<p>Within re-frame, an <code>identity</code> must differentiate one entity from another within <code>app-db</code>. Examples: </p>
<ul>
<li>a  map <code>key</code> like "1278" or <code>:warnings</code> (for a map at some path within <code>app-db</code>)</li>
<li>an integer index into a vector (again, at some path within <code>app-db</code>)</li>
<li>a multi-part <code>path</code> from the root of <code>app-db</code> right down to some leaf element, like <code>[:lavish "cloth" 187]</code></li>
<li>a <code>sub-path</code> of <code>app-db</code></li>
</ul>
<p>Ultimately, all these example <code>identities</code> are sub-paths within <code>app-db</code>. 
An <code>identity</code> is always a piece of data. If it is a vector, it is likely a path or subpath.
And, if it is just a simple value, it is probably the key of a map or the index of a vector, held at some known location with <code>app-db</code>.</p>
<h2 id="providing-identity">Providing Identity<a class="headerlink" href="#providing-identity" title="Permanent link">&para;</a></h2>
<p>When we create an instance of a re-frame Component, we supply it with the  <code>identity</code> of an entity,
via an argument which, for discussion purposes, we'll call <code>id</code>. </p>
<p>The <code>customer-names</code> Component provided above takes an <code>id</code> argument. The query vector it provides
to <code>subscribe</code> includes this <code>id</code>, so too does the event given to <code>dispatch</code>.</p>
<p>As a result, this Component is reusable - our application can have many instances of it,
and each can represent a different customer - just supply the customer <code>id</code>.</p>
<p>Here's how we could use it multiple times on the one page to show many customers:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-list</span>
  <span class="p">[]</span>
  <span class="p">[</span><span class="ss">:div</span>
   <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">id</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:all-customer-ids</span><span class="p">])]</span>
     <span class="o">^</span><span class="p">{</span><span class="ss">:key</span> <span class="nv">id</span><span class="p">}</span> <span class="p">[</span><span class="nv">customer-names</span> <span class="nv">id</span><span class="p">])])</span>
</code></pre></div>


<h2 id="multiple-identities">Multiple Identities<a class="headerlink" href="#multiple-identities" title="Permanent link">&para;</a></h2>
<p>Some Components must be provided with more than one <code>identity</code>.</p>
<p>For example, a Component might need:</p>
<ul>
<li>one <code>identity</code> for the list of alternative "things" a user can choose (think items in a dropdown)</li>
<li>one <code>identity</code> for the current choice (value) held elsewhere within <code>app-db</code></li>
</ul>
<p>This Component will need two arguments (props) for these two <code>identities</code>. </p>
<h2 id="derived-identities">Derived Identities<a class="headerlink" href="#derived-identities" title="Permanent link">&para;</a></h2>
<p>Imagine a Component (parent) which has a sub-component (child). </p>
<p>The parent might need to provide its child with a <code>sub-identity</code> derived/computed from the <code>id</code>
supplied to the parent.  Perhaps the <code>sub-identity</code> is built by <code>conj</code> -ing a further 
value onto the original <code>id</code>.  There are many possibilities.</p>
<p>Or, in another situation, an <code>id</code> provided to a component might reference an entity which 
"contains", within its value, the <code>identity</code> of a further entity - a reference to a reference.
So, the Component might have to subscribe to the primary entity and then, in a second step, 
subscribe to the derived entity.</p>
<p>If we take these ideas far enough, we leave behind discussions about re-frame and start, instead, to
discuss the pros and cons of the "data model" you have created in <code>app-db</code>.</p>
<h2 id="the-unit-of-reuse">The Unit Of Reuse<a class="headerlink" href="#the-unit-of-reuse" title="Permanent link">&para;</a></h2>
<p>Have you noticed the need for close coordination between a re-frame Component 
and the subscriptions and dispatches which service it?</p>
<p>A re-frame Component doesn't stand by itself - it isn't actually the unit of reuse. </p>
<p>The unit of reuse is:</p>
<ul>
<li>the Component</li>
<li>the subscription handlers which service its need to obtain values </li>
<li>the events handler which handles the user intent it captures</li>
</ul>
<p>I noted at the beginning that a Component had two <code>I/O</code> needs. So the unit of reuse is the re-frame Component 
plus the mechanism for servicing those needs. That's what should be packaged up and put in your library.</p>
<h2 id="implications">Implications<a class="headerlink" href="#implications" title="Permanent link">&para;</a></h2>
<p>Once you internalise that there are three parts to a reusable Component, you might realise that there is another level of abstraction possible.  </p>
<p>Up until now, I've said that a re-frame Component is defined by its use of <code>subscribe</code> and <code>dispatch</code>. But, maybe it doesn't have to be. </p>
<p>Here is a rewrite of that earlier Component:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-names</span>
  <span class="p">[</span><span class="nv">id</span> <span class="nv">get-customer-fn</span> <span class="nv">cust_change-fn</span><span class="p">]</span>       
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">customer</span> <span class="p">(</span><span class="nf">get-customer-fn</span> <span class="nv">id</span><span class="p">)]</span>      <span class="c1">;; obtain the value</span>
    <span class="p">[</span><span class="ss">:div</span> <span class="s">&quot;Name:&quot;</span>

      <span class="c1">;; first name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:first-name</span> <span class="nv">customer</span><span class="p">)</span>                <span class="c1">;; obtain first-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">cust_change-fn</span> <span class="nv">id</span> <span class="ss">:first-name</span> <span class="nv">%</span><span class="p">)]</span>   <span class="c1">;; first name has changed</span>

      <span class="c1">;; last name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span>
        <span class="p">(</span><span class="ss">:last-name</span> <span class="nv">customer</span><span class="p">)</span>                 <span class="c1">;; obtain last-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">cust_change-fn</span> <span class="nv">id</span> <span class="ss">:last-name</span> <span class="nv">%</span><span class="p">)]]))</span> <span class="c1">;; last name has changed</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>there's no sign of <code>dispatch</code> or <code>subscribe</code> anymore</li>
<li>instead, the Component is parameterised by two extra functions arguments</li>
<li>these functions handle the I/O </li>
</ul>
<blockquote>
<p>it is almost as if we have gone full circle now, and we're back to building a Reagent Component.  Remember that one at the top?  The I/O needs were handled via arguments.</p>
</blockquote>
<p>Let's rewrite the <code>customer-list</code> in terms of this new component:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-list</span>
  <span class="p">[]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">get-customer</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">id</span><span class="p">]</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span> <span class="nv">id</span><span class="p">]))</span>
        <span class="nv">put-customer</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">id</span> <span class="nv">field</span> <span class="nv">val</span><span class="p">]</span> <span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:cust-change</span> <span class="nv">id</span> <span class="nv">field</span> <span class="nv">val</span><span class="p">]))])</span>
  <span class="p">[</span><span class="ss">:div</span>
   <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">id</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:all-customer-ids</span><span class="p">])]</span>
     <span class="o">^</span><span class="p">{</span><span class="ss">:key</span> <span class="nv">id</span><span class="p">}</span> <span class="p">[</span><span class="nv">customer-names</span> <span class="nv">id</span> <span class="nv">get-customer</span> <span class="nv">put-customer</span><span class="p">])])</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>we create <code>I/O functions</code> which wrap <code>subscribe</code> and <code>dispatch</code></li>
<li>these two functions are passed into the sub-component as arguments</li>
</ul>
<p>Does this approach mean the <code>customer-names</code> Component is now more reusable? Yes, it does. 
The exact subscription query vector to use is now no longer embedded in 
the Component itself. The surrounding application supplies that. The Component 
has become even more independent of its context. It is even more reusable and flexible. </p>
<p>Obviously there's always a cost to abstraction. So, you'll have to crunch
the cost benefit analysis for your situation. </p>
<p>BTW, in a more complicated case, you can imagine a Component being provided
with more than just a couple of <code>I/O</code> functions. Instead, it could be supplied
with a <code>map</code> which nominates many, many <code>I/O</code> functions which provide to it
the necessary "access" it requires. </p>
<h2 id="independent-from-place">Independent From "Place"<a class="headerlink" href="#independent-from-place" title="Permanent link">&para;</a></h2>
<p>To obtain truely reusable Components, the subscription and event handlers 
must be written to be independent of "place" - independent of absolute paths in <code>app-db</code>. </p>
<p>In one application, customer entities might be at one path in app-db, 
whereas in the next application, they might be at another path in <code>app-db</code>. It is<br />
the job of the handlers to read and write data to/from <code>app-db</code>, so they must be
created to be independent of absolute paths? </p>
<p>That means parameterising the handlers with that path information. </p>
<p>There's a variety of ways: 
   - insist that customers are always at the same path<br />
   - the handlers themselves lookup the absolute parts of <code>app-db</code> paths in some central registry (probably stored in <code>app-db</code> itself)
   - path information is passed into the Components, and they then supply to the handlers via query-vectors and event-vectors ... much as they provide <code>id</code>
   - when the handlers are registered, they "close over" some path information (different information, for each application)</p>
<!--

### Sufficiently Complex Components

For any sufficiently complex component, passing `ids` down through layers of components can become clumsy. In a bad case, we might end up with the old "prop drilling" problem in which `id` is passed deeply into nested layers of a complicated set of sub-components. 

In such cases, we could use BranchScope.  XXXX

That would allow us to place `id` into the "environment" of the entire branch representing the re-frame Component. 

This process can nest. High-level identities can be combined with next-level sub-identities. 

-->
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
    <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav
        class="md-footer-nav__inner md-grid"
        aria-label="Footer"
      >

        <!-- Link to previous page -->
        
          <a
            href="../browser-dynamics/"
            title="Browser Dynamics"
            class="md-footer-nav__link md-footer-nav__link--prev"
            rel="prev"
          >
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Browser Dynamics
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a
            href="../App-Structure/"
            title="App Structure"
            class="md-footer-nav__link md-footer-nav__link--next"
            rel="next"
          >
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                App Structure
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2015-2020 Michael Thompson
          </div>
        
      </div>

      <!-- Social links -->
      
  <div class="md-footer-social">
    
      
      
      <a href="https://github.com/day8" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
      <a href="https://twitter.com/wazound" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
    

    </div>
    
      <script src="../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>