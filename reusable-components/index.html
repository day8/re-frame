


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Derived data, flowing">
      
      
        <link rel="canonical" href="https://day8.github.io/re-frame/reusable-components/">
      
      
        <meta name="author" content="Mike Thompson">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
    
    <title>Reusable Components</title>
    

    
      <link rel="stylesheet" href="../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#2094f3">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Source Code Pro",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,300;0,500;1,400&display=swap">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;300;400&display=swap">
    
      <link rel="stylesheet" href="../stylesheets/dominoes-live.css">
    
      <link rel="stylesheet" href="../stylesheets/codehilite-monokai.css">
    
      <link rel="stylesheet" href="../stylesheets/mkdocs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-essence-of-a-component" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header-nav md-grid" aria-label="Header">

    <!-- Link to home -->
    <a
      href="https://day8.github.io/re-frame/"
      title="re-frame"
      class="md-header-nav__button md-logo"
      aria-label="re-frame"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            re-frame
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Reusable Components
            
          </span>
        </div>
      
    </div>

    <!-- Button to open search dialogue -->
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>

      <!-- Search interface -->
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository containing source -->
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../re-frame/" class="md-tabs__link md-tabs__link--active">
          Docs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../FAQs/Inspecting-app-db/" class="md-tabs__link">
          FAQs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api-intro/" class="md-tabs__link">
          API
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../releases/2023/" class="md-tabs__link">
          Releases
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../External-Resources/" class="md-tabs__link">
          Resources
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://day8.github.io/re-frame/" title="re-frame" class="md-nav__button md-logo" aria-label="re-frame">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    re-frame
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Docs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docs" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../re-frame/" title="re-frame" class="md-nav__link">
      re-frame
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      THE BASICS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="THE BASICS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        THE BASICS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../a-loop/" title="A Data Loop" class="md-nav__link">
      A Data Loop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../application-state/" title="State" class="md-nav__link">
      State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-30k/" title="Code" class="md-nav__link">
      Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event-handling-infographic/" title="Infographics" class="md-nav__link">
      Infographics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../subscriptions/" title="Subscriptions" class="md-nav__link">
      Subscriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-live/" title="Live" class="md-nav__link">
      Live
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      INTERMEDIATE 2 & 3
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 2 & 3" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        INTERMEDIATE 2 & 3
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../EffectfulHandlers/" title="Effectful Handlers" class="md-nav__link">
      Effectful Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Interceptors/" title="Interceptors" class="md-nav__link">
      Interceptors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Effects/" title="Effects" class="md-nav__link">
      Effects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Coeffects/" title="Coeffects" class="md-nav__link">
      Coeffects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../review-todomvc/" title="Review TodoMVC" class="md-nav__link">
      Review TodoMVC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      INTERMEDIATE 4,5 & 6
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 4,5 & 6" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        INTERMEDIATE 4,5 & 6
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../correcting-a-wrong/" title="Correcting a wrong" class="md-nav__link">
      Correcting a wrong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flow-mechanics/" title="Flow Mechanics" class="md-nav__link">
      Flow Mechanics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../start-coding/" title="START CODING" class="md-nav__link">
      START CODING
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      MENTAL MODEL OMNIBUS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MENTAL MODEL OMNIBUS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MENTAL MODEL OMNIBUS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../all-models-are-wrong/" title="Other Models" class="md-nav__link">
      Other Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../on-dynamics/" title="On Dynamics" class="md-nav__link">
      On Dynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-oriented-design/" title="Data Oriented Design" class="md-nav__link">
      Data Oriented Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../interconnections/" title="Interconnections" class="md-nav__link">
      Interconnections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../historical/" title="Historical" class="md-nav__link">
      Historical
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7" checked>
    
    <label class="md-nav__link" for="nav-2-7">
      MORE ADVANCED
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MORE ADVANCED" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MORE ADVANCED
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../on-stable-dom-handlers/" title="Stable Dom Handlers" class="md-nav__link">
      Stable Dom Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-dynamics/" title="Browser Dynamics" class="md-nav__link">
      Browser Dynamics
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Reusable Components
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Reusable Components" class="md-nav__link md-nav__link--active">
      Reusable Components
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-essence-of-a-component" class="md-nav__link">
    The Essence Of A Component
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reagent-components" class="md-nav__link">
    Reagent Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-frame-components" class="md-nav__link">
    re-frame Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#many-instances" class="md-nav__link">
    Many Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-identity" class="md-nav__link">
    What Is Identity?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-identity" class="md-nav__link">
    Using Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-identities" class="md-nav__link">
    Multiple Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computed-identities" class="md-nav__link">
    Computed Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components-in-a-library" class="md-nav__link">
    Components In A Library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    Implications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusability" class="md-nav__link">
    Reusability
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solving-placefulness" class="md-nav__link">
    Solving Placefulness
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../App-Structure/" title="App Structure" class="md-nav__link">
      App Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Loading-Initial-Data/" title="Loading Initial Data" class="md-nav__link">
      Loading Initial Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Talking-To-Servers/" title="Talking To Servers" class="md-nav__link">
      Talking To Servers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Subscribing-To-External-Data/" title="Subscribing to External Data" class="md-nav__link">
      Subscribing to External Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Debugging/" title="Debugging" class="md-nav__link">
      Debugging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Performance-Problems/" title="Eek! Performance Problems" class="md-nav__link">
      Eek! Performance Problems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solve-the-CPU-hog-problem/" title="Solve the CPU hog problem" class="md-nav__link">
      Solve the CPU hog problem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Using-Stateful-JS-Components/" title="Using Stateful JS Components" class="md-nav__link">
      Using Stateful JS Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../The-re-frame-logo/" title="The Logo Backstory" class="md-nav__link">
      The Logo Backstory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Flows/" title="Flows" class="md-nav__link">
      Flows
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      FAQs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="FAQs" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        FAQs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Inspecting-app-db/" title="How can I Inspect app-db?" class="md-nav__link">
      How can I Inspect app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/BestPractice/" title="What Is Best Practice?" class="md-nav__link">
      What Is Best Practice?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/LoadOnMount/" title="How Do I Load On Mount?" class="md-nav__link">
      How Do I Load On Mount?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DoINeedReFrame/" title="Reagent looks terrific. Why do I need re-frame?" class="md-nav__link">
      Reagent looks terrific. Why do I need re-frame?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FocusOnElement/" title="How to focus on an HTML element" class="md-nav__link">
      How to focus on an HTML element
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/GlobalInterceptors/" title="How do I register a global interceptor" class="md-nav__link">
      How do I register a global interceptor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/laggy-input/" title="Why is my input field laggy?" class="md-nav__link">
      Why is my input field laggy?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/When-Does-Dispatch-Happen/" title="How long after I do a dispatch does the event get handled?" class="md-nav__link">
      How long after I do a dispatch does the event get handled?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/UseASubscriptionInAnEventHandler/" title="How can I use a subscription in an Event Handler" class="md-nav__link">
      How can I use a subscription in an Event Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/UseASubscriptionInAJsEvent/" title="How can I use a subscription in Js Event" class="md-nav__link">
      How can I use a subscription in Js Event
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Logging/" title="How do I use logging method X" class="md-nav__link">
      How do I use logging method X
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Null-Dispatched-Events/" title="Dispatched Events Are Null" class="md-nav__link">
      Dispatched Events Are Null
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-Clear-Sub-Cache/" title="Why do we need to clear the subscription cache when reloading with Figwheel?" class="md-nav__link">
      Why do we need to clear the subscription cache when reloading with Figwheel?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/CatchingEventExceptions/" title="How can I detect exceptions in Event Handlers?" class="md-nav__link">
      How can I detect exceptions in Event Handlers?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/PollADatabaseEvery60/" title="How do I turn on/off polling a database every 60 secs" class="md-nav__link">
      How do I turn on/off polling a database every 60 secs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/ViewsOnGlobalRegistration/" title="re-frame uses side-effecting registrations. Should I feel dirty?" class="md-nav__link">
      re-frame uses side-effecting registrations. Should I feel dirty?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-CLJC/" title="Why is re-frame implemented in `.cljc` files" class="md-nav__link">
      Why is re-frame implemented in `.cljc` files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DB_Normalisation/" title="How do I store normalised data in app-db?" class="md-nav__link">
      How do I store normalised data in app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FullStackReframe/" title="How do I do full-stack re-frame?" class="md-nav__link">
      How do I do full-stack re-frame?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api-intro/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-builtin-effects/" title="Builtin Effects" class="md-nav__link">
      Builtin Effects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-re-frame.core/" title="re-frame.core" class="md-nav__link">
      re-frame.core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-re-frame.alpha/" title="re-frame.alpha" class="md-nav__link">
      re-frame.alpha
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Releases
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Releases" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2023/" title="2023" class="md-nav__link">
      2023
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2022/" title="2022" class="md-nav__link">
      2022
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2021/" title="2021" class="md-nav__link">
      2021
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2020/" title="2020" class="md-nav__link">
      2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2019/" title="2019" class="md-nav__link">
      2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2018/" title="2018" class="md-nav__link">
      2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2017/" title="2017" class="md-nav__link">
      2017
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2016/" title="2016" class="md-nav__link">
      2016
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2015/" title="2015" class="md-nav__link">
      2015
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Resources
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Resources" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../External-Resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-essence-of-a-component" class="md-nav__link">
    The Essence Of A Component
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reagent-components" class="md-nav__link">
    Reagent Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#re-frame-components" class="md-nav__link">
    re-frame Components
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#many-instances" class="md-nav__link">
    Many Instances
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-identity" class="md-nav__link">
    What Is Identity?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-identity" class="md-nav__link">
    Using Identity
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-identities" class="md-nav__link">
    Multiple Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computed-identities" class="md-nav__link">
    Computed Identities
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#components-in-a-library" class="md-nav__link">
    Components In A Library
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    Implications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusability" class="md-nav__link">
    Reusability
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#solving-placefulness" class="md-nav__link">
    Solving Placefulness
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/day8/re-frame/edit/master/docs/reusable-components.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                  <h1>Reusable Components</h1>
                
                <p>In re-frame, there are two kinds of Component:</p>
<ul>
<li><strong>Reagent Components</strong> - widgets representing a single value, like a number or choice or string</li>
<li><strong>re-frame Components</strong> - larger widget complexes, often representing an entity</li>
</ul>
<h2 id="the-essence-of-a-component">The Essence Of A Component<a class="headerlink" href="#the-essence-of-a-component" title="Permanent link">&para;</a></h2>
<p>All Components have:</p>
<ul>
<li>two responsibilities</li>
<li>and two associated requirements</li>
</ul>
<p>The two responsibilities:</p>
<ol>
<li>
<p><strong>to render a value</strong><br>
   That value could be as simple as a string or as complicated as an entire Pivot Table. 
   It may, optionally, also render affordances allowing the user to modify the value. E.g. a spinner supplies up/down buttons. 
   Or, for a pivot table, the user can drag "dimension fields" from one place to another to configure the data rollups it displays.</p>
</li>
<li>
<p><strong>to capture and communicate user intent</strong><br>
   if the user interacts with the Component to modify the value, then it must communicate the user's intent 
   to the surrounding application logic, so it can be interpreted and acted upon.</p>
</li>
</ol>
<p>To fulfil these two responsibilities, Components have <strong>two associated requirements</strong>:</p>
<ol>
<li>a way to <strong>obtain the value</strong> they represent</li>
<li>a way to <strong>communicate user intent</strong></li>
</ol>
<p>One of these requirements relates to <code>Input</code> (obtaining), and the other to <code>Output</code> (communicating intent), so we'll 
collectively refer to them as the Component's <strong>I/O requirements</strong>. </p>
<h2 id="reagent-components">Reagent Components<a class="headerlink" href="#reagent-components" title="Permanent link">&para;</a></h2>
<p>The simplest Components are <strong>Widgets</strong>, which represent a single value like an integer, string or selection.</p>
<p>You can create them from base HTML elements such as <code>&lt;input&gt;</code> or <code>&lt;select&gt;</code>
using only <strong>Reagent</strong> (no re-frame) and,
for that reason, they are referred to as <code>Reagent Components</code>. </p>
<p>Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">simple-text-input</span>
  <span class="p">[</span><span class="nv">value</span> <span class="nv">callback-fn</span><span class="p">]</span>
  <span class="p">[</span><span class="ss">:input</span> 
   <span class="p">{</span><span class="ss">:type</span>      <span class="s">&quot;text&quot;</span>
    <span class="ss">:value</span>     <span class="nv">value</span>                                     <span class="c1">;; initial value</span>
    <span class="ss">:on-change</span> <span class="o">#</span><span class="p">(</span><span class="nf">callback-fn</span> <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">%</span> <span class="nv">.-target</span> <span class="nv">.-value</span><span class="p">))}])</span> <span class="c1">;; callback with value</span>
</code></pre></div>


<p>You'll notice that both of this Component's <strong>I/O requirements</strong> are provided via two positional arguments:</p>
<ol>
<li>a value (input)</li>
<li>a callback function - a means of communicating the user's intent for change (output)</li>
</ol>
<p>Because both of these requirements are satisfied via arguments, this Component
is quite reusable. We could use it for any string value.</p>
<p>But, of course, the responsibility for providing I/O requirements doesn't disappear. It has just been shifted to the parent Component. This parent will have to act as the glue which "wires" this 
reusable Component into an application context, providing the value and actioning user intent.</p>
<!-- 
When something is reusable, something has to "bind" or ground it into the application. Wire it in. 
-->

<h2 id="re-frame-components">re-frame Components<a class="headerlink" href="#re-frame-components" title="Permanent link">&para;</a></h2>
<p>A <code>re-frame Component</code> is different from a <code>Reagent Component</code>.
because of how it satisfies its <strong>I/O requirements</strong>:</p>
<ul>
<li>it will use <code>subscribe</code> to obtain values  (input)</li>
<li>it will use <code>dispatch</code> to communicate events modelling user intent  (output)</li>
</ul>
<p>re-frame Components tend to be larger. They often represent  <strong>an entire entity</strong>
(not just a single, simple value) and they might involve a "complex of widgets"
with a cohesive purpose.</p>
<p>Here's an example:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-names</span>
  <span class="p">[]</span>                                                   
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">customer</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span><span class="p">])]</span>              <span class="c1">;; obtain the customer entity</span>
    <span class="p">[</span><span class="ss">:div</span> <span class="s">&quot;Name:&quot;</span>

      <span class="c1">; first name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:first-name</span> <span class="nv">customer</span><span class="p">)</span>                          <span class="c1">;; first-name from entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="ss">:first-name</span> <span class="nv">%</span><span class="p">])]</span>   <span class="c1">;; first name changed</span>

       <span class="c1">;; last name</span>
       <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:last-name</span> <span class="nv">customer</span><span class="p">)</span>                           <span class="c1">;; last-name from entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="ss">:last-name</span> <span class="nv">%</span><span class="p">])]]))</span> <span class="c1">;; last name changed</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>This is a <code>re-frame Component</code> because it uses <code>subscribe</code> and <code>dispatch</code> to provide its I/O requirements</li>
<li>It composes two other components - Reagent components - the reusable <code>simple-text-input</code> we created above</li>
<li>It parameterises the I/O requirements for the two sub-components by supplying a <code>value</code> and a <code>callback</code> to each</li>
</ul>
<h2 id="many-instances">Many Instances<a class="headerlink" href="#many-instances" title="Permanent link">&para;</a></h2>
<p>But this re-frame Component only works when there is one <code>Customer</code> - you'll notice it contained the code:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span><span class="p">])</span>
</code></pre></div>


<p>What if our application has many <code>Customers</code>? We'd want a Component that can represent 
any one of them, or we might need to render many Customers in the UI at once
(not just one at a time).</p>
<p>How then should we rewrite this Component so it can represent Customer entity <code>A</code> one time, and 
Customer entity <code>B</code> another time?  A Component instance representing entity <code>A</code> would have to <code>subscribe</code> 
to the <code>value</code> representing <code>A</code>. And any events it dispatches must cause changes to 
<code>A</code>, not <code>B</code>.</p>
<p>Method: </p>
<ul>
<li>supply each <code>Component</code> instance with the <strong>identity</strong> of the Customer entity it should represent</li>
<li>this <code>identity</code> is supplied as an argument  (typically)</li>
<li>each Component instance will use this <code>identity</code> within the query vector given to <code>subscribe</code> - so the query is parameterised by the <code>identity</code></li>
<li>the subscription handler will use this <code>identity</code> to obtain the entity's value</li>
<li>likewise, when events are <code>dispatched</code>, they too will include <code>identity</code>, so the <code>event handler</code> knows which entity to modify</li>
</ul>
<p>Here's the rewrite which implements this method:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-names</span>
  <span class="p">[</span><span class="nv">id</span><span class="p">]</span>                                                  <span class="c1">;; customer `id` as argument</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">customer</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span> <span class="nv">id</span><span class="p">])]</span>           <span class="c1">;; obtain the value using `id`</span>
    <span class="p">[</span><span class="ss">:div</span> <span class="s">&quot;Name:&quot;</span>

      <span class="c1">; first name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:first-name</span> <span class="nv">customer</span><span class="p">)</span>                             
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="nv">id</span> <span class="ss">:first-name</span> <span class="nv">%</span><span class="p">])]</span>   <span class="c1">;;  include `id`</span>

       <span class="c1">;; last name</span>
       <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:last-name</span> <span class="nv">customer</span><span class="p">)</span>                              
        <span class="o">#</span><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:change-customer</span> <span class="nv">id</span> <span class="ss">:last-name</span> <span class="nv">%</span><span class="p">])]]))</span> <span class="c1">;; include `id`</span>
</code></pre></div>


<h2 id="what-is-identity">What Is Identity?<a class="headerlink" href="#what-is-identity" title="Permanent link">&para;</a></h2>
<p>An <code>identity</code> distinguishes one entity from
another - it is something that distinguishes the entity <code>A</code> from entity <code>B</code>. 
In a different technology context, it might be called "a pointer" 
(a memory address), "a reference" or "a unique key".</p>
<p>Every entity is stored in <code>app-db</code> 
and, consequently, one reliable <code>identity</code> is the  <strong>path</strong> to that
entity's location within  <code>app-db</code>.  Such paths are vectors - paths are data. They are like a pointer to a place within <code>app-db</code>.</p>
<p>So, the <code>identity</code> for entity <code>A</code> could be the path vector 
to <code>A</code>'s location, for example <code>[:entities :customers 123]</code>.  In effect, if you did:</p>
<div class="codehilite"><pre><span></span><code>   <span class="p">(</span><span class="nf">get-in</span> <span class="nv">db</span> <span class="p">[</span><span class="ss">:entities</span> <span class="ss">:customers</span> <span class="mi">123</span><span class="p">])</span>
</code></pre></div>


<p>you would get the entity. And the <code>identity</code> for <code>B</code> might be 
the same other than for the last element, <code>[:entities :customers 456]</code>. In this fictional 
scenario, the entities <code>A</code> and <code>B</code> are both stored in a map the location <code>[:entities :customers]</code> within <code>app-db</code>,
but you would access them via different keys in that map (<code>123</code> vs <code>456</code>).</p>
<p>Sometimes, the <code>identity</code> need only be the last part of the <code>path</code> - the <code>123</code> or <code>456</code> part
in the example above. The location of the map, <code>[:entities :customers]</code>, within <code>app-db</code> could be "known" by the 
subscription handlers and event handlers, so it doesn't have to be provided, and only the final part of 
the path (a key in the map at that location) is needed to distinguish two identities.</p>
<p>So, in summary, an <code>identity</code> is usually a path or a path segment.</p>
<h2 id="using-identity">Using Identity<a class="headerlink" href="#using-identity" title="Permanent link">&para;</a></h2>
<p>Here's how we could use our reusable Component multiple times on one page to show many customers:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-list</span>
  <span class="p">[]</span>
  <span class="p">[</span><span class="ss">:div</span>
   <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">id</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:all-customer-ids</span><span class="p">])]</span>
     <span class="o">^</span><span class="p">{</span><span class="ss">:key</span> <span class="nv">id</span><span class="p">}</span> <span class="p">[</span><span class="nv">customer-names</span> <span class="nv">id</span><span class="p">])])</span> 
</code></pre></div>


<p>Notice that <code>id</code> is provided for each instance (see the code <code>[customer-names id]</code>). That's the entity identity.</p>
<h2 id="multiple-identities">Multiple Identities<a class="headerlink" href="#multiple-identities" title="Permanent link">&para;</a></h2>
<p>Sometimes we need to provide more than one <code>identity</code> to a Component.</p>
<p>For example, a dropdown Component might need:</p>
<ul>
<li>one <code>identity</code> for the list of alternative "choices" available to the user to select </li>
<li>one <code>identity</code> for the current choice (value) held elsewhere within <code>app-db</code></li>
</ul>
<p>Such a Component would need two arguments (props) for these two <code>identities</code>, and it would need 
a way to use the identities in subscriptions.</p>
<h2 id="computed-identities">Computed Identities<a class="headerlink" href="#computed-identities" title="Permanent link">&para;</a></h2>
<p><code>identities</code> are data, and you can compute data. </p>
<p>When a parent Component has a child sub-component, the parent 
might provide its child with an <code>identity</code> which is derivative of the <code>id</code>
supplied to it.  Perhaps this <code>identity</code> is built by <code>conj</code>-ing a further 
value onto the original <code>id</code>.  </p>
<p>There are many possibilities.</p>
<p>In another situation, the <code>id</code> provided to a component might reference an entity that itself
"contains" the <code>identity</code> of a different entity - a reference to a reference.
So, the Component might have to subscribe to the primary entity and then, in a second step, 
subscribe to the derived entity.</p>
<p>If we explore these ideas far enough, we leave behind discussions about re-frame and start, instead, to
discuss the pros and cons of the "data model" you have created within <code>app-db</code>.</p>
<h2 id="components-in-a-library">Components In A Library<a class="headerlink" href="#components-in-a-library" title="Permanent link">&para;</a></h2>
<p>Have you noticed the need for close coordination between a re-frame Component 
and the subscriptions and dispatches which service it's I/O Requirements?</p>
<p>A re-frame Component doesn't stand by itself - it isn't the unit of reuse.</p>
<p>Because a Component has two <code>I/O</code> requirements, the unit of reuse is the re-frame Component 
plus the mechanism needed to service those <code>I/O</code> requirements. That's what should be 
packaged up and put in your library if you want to reuse a Component across multiple applications.</p>
<p>So, just to be clear: the unit of reuse is the combination of:</p>
<ul>
<li>the Component</li>
<li>the subscription handlers which service its need to obtain values </li>
<li>the event handlers which service the user intent it captures</li>
</ul>
<h2 id="implications">Implications<a class="headerlink" href="#implications" title="Permanent link">&para;</a></h2>
<p>Because a reusable <code>re-frame Component</code> has three parts, there is another level of abstraction possible.  </p>
<p>Until now, I've said that a <code>re-frame Component</code> is defined by its use of <code>subscribe</code> and <code>dispatch</code>, but maybe it doesn't have to be that way. </p>
<p>Here is a rewrite of that earlier Component:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-names</span>
  <span class="p">[</span><span class="nv">id</span> <span class="nv">get-customer-fn</span> <span class="nv">cust_change-fn</span><span class="p">]</span>       
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">customer</span> <span class="p">(</span><span class="nf">get-customer-fn</span> <span class="nv">id</span><span class="p">)]</span>      <span class="c1">;; obtain the value</span>
    <span class="p">[</span><span class="ss">:div</span> <span class="s">&quot;Name:&quot;</span>

      <span class="c1">;; first name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span> 
        <span class="p">(</span><span class="ss">:first-name</span> <span class="nv">customer</span><span class="p">)</span>                <span class="c1">;; obtain first-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">cust_change-fn</span> <span class="nv">id</span> <span class="ss">:first-name</span> <span class="nv">%</span><span class="p">)]</span>   <span class="c1">;; first name has changed</span>

      <span class="c1">;; last name</span>
      <span class="p">[</span><span class="nv">simple-text-input</span>
        <span class="p">(</span><span class="ss">:last-name</span> <span class="nv">customer</span><span class="p">)</span>                 <span class="c1">;; obtain last-name from the entity</span>
        <span class="o">#</span><span class="p">(</span><span class="nf">cust_change-fn</span> <span class="nv">id</span> <span class="ss">:last-name</span> <span class="nv">%</span><span class="p">)]]))</span> <span class="c1">;; last name has changed</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>there's now no sign of <code>dispatch</code> or <code>subscribe</code></li>
<li>instead, the Component is parameterised by two extra function arguments</li>
<li>these functions handle the I/O requirements</li>
</ul>
<blockquote>
<p>it is almost as if we have gone full circle now, and we're back to something 
which looks like a Reagent Component.  Remember that one at the very top?<br />
The I/O requirements were handled via arguments, which shifts "knowledge" about the 
application context to the parent. </p>
</blockquote>
<p>Let's rewrite <code>customer-list</code> in terms of this new Component:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">customer-list</span>
  <span class="p">[]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">get-customer</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">id</span><span class="p">]</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:customer</span> <span class="nv">id</span><span class="p">]))</span>
        <span class="nv">put-customer</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">id</span> <span class="nv">field</span> <span class="nv">val</span><span class="p">]</span> <span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:cust-change</span> <span class="nv">id</span> <span class="nv">field</span> <span class="nv">val</span><span class="p">]))])</span>
  <span class="p">[</span><span class="ss">:div</span>
   <span class="p">(</span><span class="nb">for </span><span class="p">[</span><span class="nv">id</span> <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:all-customer-ids</span><span class="p">])]</span>
     <span class="o">^</span><span class="p">{</span><span class="ss">:key</span> <span class="nv">id</span><span class="p">}</span> <span class="p">[</span><span class="nv">customer-names</span> <span class="nv">id</span> <span class="nv">get-customer</span> <span class="nv">put-customer</span><span class="p">])])</span>
</code></pre></div>


<p>Notes:</p>
<ul>
<li>we create <code>I/O functions</code> which wrap <code>subscribe</code> and <code>dispatch</code></li>
<li>these two functions are passed into the sub-component as arguments</li>
</ul>
<p>But does this approach mean the <code>customer-names</code> Component is now more reusable? Well, yes, probably. 
The exact subscription query to use is now no longer embedded in 
the Component itself. The surrounding application supplies that. The Component 
has become even more independent of its context. It is even more reusable and flexible. 
On the downside, the parent context has more "knowledge" and responsibility. It has to "wire" the Component into the application.</p>
<p>Obviously, there's always a cost to abstraction. So, you'll have to crunch
the cost-benefit analysis for your situation. </p>
<h2 id="reusability">Reusability<a class="headerlink" href="#reusability" title="Permanent link">&para;</a></h2>
<p>There are two levels of reusability:</p>
<ul>
<li>reusability within a particular application. 
    You want to use a Component across multiple entities and perhaps in different widget ensembles within the one application.</li>
<li>reusability across applications. Put the Component in a library. </li>
</ul>
<p><code>Reagent components</code> are reusable in both ways - just look at a library like <code>re-com</code>. </p>
<p>With <code>re-frame Components</code>, reuse is fairly easy 
within the one 
application, but when you try to put them in a library for use across multiple 
applications you run into a challenge to solve: <strong><em>placefulness</em></strong>.</p>
<p>We noted earlier that re-frame Components extend to include the handlers which look after the I/O requirements. And those I/O handlers 
have to know <strong>where</strong>, within <code>app-db</code> to obtain and update data.</p>
<p>But, from one application to another, the path (the place) where entities are 
stored can change. A library Component should not be dictating this "place" to the applications which use it. </p>
<h2 id="solving-placefulness">Solving Placefulness<a class="headerlink" href="#solving-placefulness" title="Permanent link">&para;</a></h2>
<p><strong>First</strong>, you could ignore the issue because either:
  1. you have a single app to maintain, and you are optimising for simplicity  (over generality and reusability)
  2. you will avoid using re-frame components, and instead, you just use Reagent Components
     (e.g. we have a rather complicated Table Component which is just a Reagent Component)</p>
<p><strong>Second</strong>, to solve placefulness, you could standardise where entities are placed within <code>app-db</code>. You could 
mandate that entities are always stored at a known place (eg. <code>[:entities :Customers]</code> or <code>[:entities :Products]</code>). 
You could then write your reusable components with this assumption, and all your applications adhere to this stipulation. 
You could perhaps use <a href="https://github.com/den1k/subgraph">Subgraph</a>.</p>
<p><strong>Third</strong>, you can parameterise the Component with base-path information via:
  - React context (probably not)
  - via args to the Component - ie. quite literally pass in the base path as an argument 
    to the Component and then pass that along to the handlers by including that path in 
    the dispatched event and subscription query vectors.</p>
<p><strong>Fourth</strong>, more radically, you could choose not to use the <code>map</code> in <code>ratom</code> approach that is <code>app-db</code>. 
We could use a data structure that is less placeful. Perhaps use a <code>DataScript</code> database via <a href="https://github.com/denistakeda/re-posh">re-posh</a>. </p>
<p><strong>Not doing</strong> - one thing we won't be doing is storing state in the Component itself, away from the 
central "data store". The moment we did that, we would have created multiple "stores of state", and then we'd have responsibility for coordinating the sync-ing of those data stores, 
a process which starts off looking simple enough but which soon envelops your architecture like an octopus. Managing distributed state is a much more difficult problem than placefulness.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<p>Reagent components are readily reusable, and re-frame Components can be made reusable, subject to solving the placefulness issue. </p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
    <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav
        class="md-footer-nav__inner md-grid"
        aria-label="Footer"
      >

        <!-- Link to previous page -->
        
          <a
            href="../browser-dynamics/"
            title="Browser Dynamics"
            class="md-footer-nav__link md-footer-nav__link--prev"
            rel="prev"
          >
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Browser Dynamics
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a
            href="../App-Structure/"
            title="App Structure"
            class="md-footer-nav__link md-footer-nav__link--next"
            rel="next"
          >
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                App Structure
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2015-2021 Michael Thompson
          </div>
        
      </div>

      <!-- Social links -->
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/day8" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/wazound" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
    <script src="/re-frame/js/docs.js"></script>

    </div>
    
      <script src="../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>