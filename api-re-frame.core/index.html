


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Derived data, flowing">
      
      
        <link rel="canonical" href="https://day8.github.io/re-frame/api-re-frame.core/">
      
      
        <meta name="author" content="Mike Thompson">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.9">
    
    
    
    <title>re-frame.core</title>
    

    
      <link rel="stylesheet" href="../assets/stylesheets/main.36ee6aaa.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.83bccb1f.min.css">
      
      
        
        
        <meta name="theme-color" content="#2094f3">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>body,input{font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Source Code Pro",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,300;0,500;1,400&display=swap">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;300;400&display=swap">
    
      <link rel="stylesheet" href="../stylesheets/dominoes-live.css">
    
      <link rel="stylesheet" href="../stylesheets/codehilite-monokai.css">
    
      <link rel="stylesheet" href="../stylesheets/mkdocs.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#re-framecore" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header-nav md-grid" aria-label="Header">

    <!-- Link to home -->
    <a
      href="https://day8.github.io/re-frame/"
      title="re-frame"
      class="md-header-nav__button md-logo"
      aria-label="re-frame"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            re-frame
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              re-frame.core
            
          </span>
        </div>
      
    </div>

    <!-- Button to open search dialogue -->
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>

      <!-- Search interface -->
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository containing source -->
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../re-frame/" class="md-tabs__link">
          Docs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../FAQs/Inspecting-app-db/" class="md-tabs__link">
          FAQs
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api-intro/" class="md-tabs__link md-tabs__link--active">
          API
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../releases/2023/" class="md-tabs__link">
          Releases
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../External-Resources/" class="md-tabs__link">
          Resources
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://day8.github.io/re-frame/" title="re-frame" class="md-nav__button md-logo" aria-label="re-frame">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    re-frame
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/day8/re-frame/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    day8/re-frame
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Docs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Docs" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Docs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../re-frame/" title="re-frame" class="md-nav__link">
      re-frame
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      THE BASICS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="THE BASICS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        THE BASICS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../a-loop/" title="A Data Loop" class="md-nav__link">
      A Data Loop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../application-state/" title="State" class="md-nav__link">
      State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-30k/" title="Code" class="md-nav__link">
      Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event-handling-infographic/" title="Infographics" class="md-nav__link">
      Infographics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../subscriptions/" title="Subscriptions" class="md-nav__link">
      Subscriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dominoes-live/" title="Live" class="md-nav__link">
      Live
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      INTERMEDIATE 2 & 3
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 2 & 3" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        INTERMEDIATE 2 & 3
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../EffectfulHandlers/" title="Effectful Handlers" class="md-nav__link">
      Effectful Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Interceptors/" title="Interceptors" class="md-nav__link">
      Interceptors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Effects/" title="Effects" class="md-nav__link">
      Effects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Coeffects/" title="Coeffects" class="md-nav__link">
      Coeffects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../review-todomvc/" title="Review TodoMVC" class="md-nav__link">
      Review TodoMVC
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      INTERMEDIATE 4,5 & 6
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="INTERMEDIATE 4,5 & 6" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        INTERMEDIATE 4,5 & 6
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../correcting-a-wrong/" title="Correcting a wrong" class="md-nav__link">
      Correcting a wrong
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../flow-mechanics/" title="Flow Mechanics" class="md-nav__link">
      Flow Mechanics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../start-coding/" title="START CODING" class="md-nav__link">
      START CODING
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      MENTAL MODEL OMNIBUS
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MENTAL MODEL OMNIBUS" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MENTAL MODEL OMNIBUS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../all-models-are-wrong/" title="Other Models" class="md-nav__link">
      Other Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../on-dynamics/" title="On Dynamics" class="md-nav__link">
      On Dynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-oriented-design/" title="Data Oriented Design" class="md-nav__link">
      Data Oriented Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../interconnections/" title="Interconnections" class="md-nav__link">
      Interconnections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../historical/" title="Historical" class="md-nav__link">
      Historical
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      MORE ADVANCED
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="MORE ADVANCED" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        MORE ADVANCED
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../on-stable-dom-handlers/" title="Stable Dom Handlers" class="md-nav__link">
      Stable Dom Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../browser-dynamics/" title="Browser Dynamics" class="md-nav__link">
      Browser Dynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reusable-components/" title="Reusable Components" class="md-nav__link">
      Reusable Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../App-Structure/" title="App Structure" class="md-nav__link">
      App Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Loading-Initial-Data/" title="Loading Initial Data" class="md-nav__link">
      Loading Initial Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Talking-To-Servers/" title="Talking To Servers" class="md-nav__link">
      Talking To Servers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Subscribing-To-External-Data/" title="Subscribing to External Data" class="md-nav__link">
      Subscribing to External Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Debugging/" title="Debugging" class="md-nav__link">
      Debugging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Performance-Problems/" title="Eek! Performance Problems" class="md-nav__link">
      Eek! Performance Problems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Solve-the-CPU-hog-problem/" title="Solve the CPU hog problem" class="md-nav__link">
      Solve the CPU hog problem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Using-Stateful-JS-Components/" title="Using Stateful JS Components" class="md-nav__link">
      Using Stateful JS Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../The-re-frame-logo/" title="The Logo Backstory" class="md-nav__link">
      The Logo Backstory
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      FAQs
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="FAQs" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        FAQs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Inspecting-app-db/" title="How can I Inspect app-db?" class="md-nav__link">
      How can I Inspect app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/BestPractice/" title="What Is Best Practice?" class="md-nav__link">
      What Is Best Practice?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/LoadOnMount/" title="How Do I Load On Mount?" class="md-nav__link">
      How Do I Load On Mount?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DoINeedReFrame/" title="Reagent looks terrific. Why do I need re-frame?" class="md-nav__link">
      Reagent looks terrific. Why do I need re-frame?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FocusOnElement/" title="How to focus on an HTML element" class="md-nav__link">
      How to focus on an HTML element
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/GlobalInterceptors/" title="How do I register a global interceptor" class="md-nav__link">
      How do I register a global interceptor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/laggy-input/" title="Why is my input field laggy?" class="md-nav__link">
      Why is my input field laggy?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/When-Does-Dispatch-Happen/" title="How long after I do a dispatch does the event get handled?" class="md-nav__link">
      How long after I do a dispatch does the event get handled?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/UseASubscriptionInAnEventHandler/" title="How can I use a subscription in an Event Handler" class="md-nav__link">
      How can I use a subscription in an Event Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Logging/" title="How do I use logging method X" class="md-nav__link">
      How do I use logging method X
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Null-Dispatched-Events/" title="Dispatched Events Are Null" class="md-nav__link">
      Dispatched Events Are Null
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-Clear-Sub-Cache/" title="Why do we need to clear the subscription cache when reloading with Figwheel?" class="md-nav__link">
      Why do we need to clear the subscription cache when reloading with Figwheel?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/CatchingEventExceptions/" title="How can I detect exceptions in Event Handlers?" class="md-nav__link">
      How can I detect exceptions in Event Handlers?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/PollADatabaseEvery60/" title="How do I turn on/off polling a database every 60 secs" class="md-nav__link">
      How do I turn on/off polling a database every 60 secs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/ViewsOnGlobalRegistration/" title="re-frame uses side-effecting registrations. Should I feel dirty?" class="md-nav__link">
      re-frame uses side-effecting registrations. Should I feel dirty?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/Why-CLJC/" title="Why is re-frame implemented in `.cljc` files" class="md-nav__link">
      Why is re-frame implemented in `.cljc` files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/DB_Normalisation/" title="How do I store normalised data in app-db?" class="md-nav__link">
      How do I store normalised data in app-db?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/FullStackReframe/" title="How do I do full-stack re-frame?" class="md-nav__link">
      How do I do full-stack re-frame?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      API
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="API" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api-intro/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api-builtin-effects/" title="Builtin Effects" class="md-nav__link">
      Builtin Effects
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        re-frame.core
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="re-frame.core" class="md-nav__link md-nav__link--active">
      re-frame.core
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dispatching-events" class="md-nav__link">
    Dispatching Events
  </a>
  
    <nav class="md-nav" aria-label="Dispatching Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dispatch" class="md-nav__link">
    dispatch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatch-sync" class="md-nav__link">
    dispatch-sync
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-handlers" class="md-nav__link">
    Event Handlers
  </a>
  
    <nav class="md-nav" aria-label="Event Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-event-db" class="md-nav__link">
    reg-event-db
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-event-fx" class="md-nav__link">
    reg-event-fx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-event-ctx" class="md-nav__link">
    reg-event-ctx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-event" class="md-nav__link">
    clear-event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subscriptions" class="md-nav__link">
    Subscriptions
  </a>
  
    <nav class="md-nav" aria-label="Subscriptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-sub" class="md-nav__link">
    reg-sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-sub" class="md-nav__link">
    clear-sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-sub-raw" class="md-nav__link">
    reg-sub-raw
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-subscription-cache" class="md-nav__link">
    clear-subscription-cache!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effect-handlers" class="md-nav__link">
    Effect Handlers
  </a>
  
    <nav class="md-nav" aria-label="Effect Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-fx" class="md-nav__link">
    reg-fx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-fx" class="md-nav__link">
    clear-fx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coeffects" class="md-nav__link">
    Coeffects
  </a>
  
    <nav class="md-nav" aria-label="Coeffects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-cofx" class="md-nav__link">
    reg-cofx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inject-cofx" class="md-nav__link">
    inject-cofx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-cofx" class="md-nav__link">
    clear-cofx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interceptors" class="md-nav__link">
    Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enrich" class="md-nav__link">
    enrich
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unwrap" class="md-nav__link">
    unwrap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trim-v" class="md-nav__link">
    trim-v
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after" class="md-nav__link">
    after
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-changes" class="md-nav__link">
    on-changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-interceptors" class="md-nav__link">
    Global Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Global Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-global-interceptor" class="md-nav__link">
    reg-global-interceptor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-global-interceptor" class="md-nav__link">
    clear-global-interceptor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-interceptors" class="md-nav__link">
    Writing Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Writing Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-interceptor" class="md-nav__link">
    -&gt;interceptor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-coeffect" class="md-nav__link">
    get-coeffect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assoc-coeffect" class="md-nav__link">
    assoc-coeffect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-effect" class="md-nav__link">
    get-effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assoc-effect" class="md-nav__link">
    assoc-effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enqueue" class="md-nav__link">
    enqueue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-loggers" class="md-nav__link">
    set-loggers!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#console" class="md-nav__link">
    console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    Miscellaneous
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-restore-fn" class="md-nav__link">
    make-restore-fn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purge-event-queue" class="md-nav__link">
    purge-event-queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-post-event-callback" class="md-nav__link">
    add-post-event-callback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-post-event-callback" class="md-nav__link">
    remove-post-event-callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated" class="md-nav__link">
    Deprecated
  </a>
  
    <nav class="md-nav" aria-label="Deprecated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-handler" class="md-nav__link">
    register-handler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-sub" class="md-nav__link">
    register-sub
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Releases
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Releases" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2023/" title="2023" class="md-nav__link">
      2023
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2022/" title="2022" class="md-nav__link">
      2022
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2021/" title="2021" class="md-nav__link">
      2021
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2020/" title="2020" class="md-nav__link">
      2020
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2019/" title="2019" class="md-nav__link">
      2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2018/" title="2018" class="md-nav__link">
      2018
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2017/" title="2017" class="md-nav__link">
      2017
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2016/" title="2016" class="md-nav__link">
      2016
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/2015/" title="2015" class="md-nav__link">
      2015
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Resources
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Resources" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../External-Resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dispatching-events" class="md-nav__link">
    Dispatching Events
  </a>
  
    <nav class="md-nav" aria-label="Dispatching Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dispatch" class="md-nav__link">
    dispatch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatch-sync" class="md-nav__link">
    dispatch-sync
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event-handlers" class="md-nav__link">
    Event Handlers
  </a>
  
    <nav class="md-nav" aria-label="Event Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-event-db" class="md-nav__link">
    reg-event-db
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-event-fx" class="md-nav__link">
    reg-event-fx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-event-ctx" class="md-nav__link">
    reg-event-ctx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-event" class="md-nav__link">
    clear-event
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subscriptions" class="md-nav__link">
    Subscriptions
  </a>
  
    <nav class="md-nav" aria-label="Subscriptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-sub" class="md-nav__link">
    reg-sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscribe" class="md-nav__link">
    subscribe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-sub" class="md-nav__link">
    clear-sub
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reg-sub-raw" class="md-nav__link">
    reg-sub-raw
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-subscription-cache" class="md-nav__link">
    clear-subscription-cache!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#effect-handlers" class="md-nav__link">
    Effect Handlers
  </a>
  
    <nav class="md-nav" aria-label="Effect Handlers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-fx" class="md-nav__link">
    reg-fx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-fx" class="md-nav__link">
    clear-fx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coeffects" class="md-nav__link">
    Coeffects
  </a>
  
    <nav class="md-nav" aria-label="Coeffects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-cofx" class="md-nav__link">
    reg-cofx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inject-cofx" class="md-nav__link">
    inject-cofx
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-cofx" class="md-nav__link">
    clear-cofx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interceptors" class="md-nav__link">
    Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    path
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enrich" class="md-nav__link">
    enrich
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unwrap" class="md-nav__link">
    unwrap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trim-v" class="md-nav__link">
    trim-v
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after" class="md-nav__link">
    after
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-changes" class="md-nav__link">
    on-changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-interceptors" class="md-nav__link">
    Global Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Global Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reg-global-interceptor" class="md-nav__link">
    reg-global-interceptor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-global-interceptor" class="md-nav__link">
    clear-global-interceptor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-interceptors" class="md-nav__link">
    Writing Interceptors
  </a>
  
    <nav class="md-nav" aria-label="Writing Interceptors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-interceptor" class="md-nav__link">
    -&gt;interceptor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-coeffect" class="md-nav__link">
    get-coeffect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assoc-coeffect" class="md-nav__link">
    assoc-coeffect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-effect" class="md-nav__link">
    get-effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assoc-effect" class="md-nav__link">
    assoc-effect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enqueue" class="md-nav__link">
    enqueue
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    Logging
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-loggers" class="md-nav__link">
    set-loggers!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#console" class="md-nav__link">
    console
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    Miscellaneous
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-restore-fn" class="md-nav__link">
    make-restore-fn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#purge-event-queue" class="md-nav__link">
    purge-event-queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-post-event-callback" class="md-nav__link">
    add-post-event-callback
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-post-event-callback" class="md-nav__link">
    remove-post-event-callback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated" class="md-nav__link">
    Deprecated
  </a>
  
    <nav class="md-nav" aria-label="Deprecated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-handler" class="md-nav__link">
    register-handler
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-sub" class="md-nav__link">
    register-sub
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/day8/re-frame/edit/master/docs/api-re-frame.core.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="re-framecore">re-frame.core<a class="headerlink" href="#re-framecore" title="Permanent link">&para;</a></h1>
<h2 id="dispatching-events">Dispatching Events<a class="headerlink" href="#dispatching-events" title="Permanent link">&para;</a></h2>
<h3 id="dispatch">dispatch<a class="headerlink" href="#dispatch" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">dispatch</span> <span class="nv">event</span><span class="p">)</span></code></p>
<p>Queue <code>event</code> for processing (handling).</p>
<p><code>event</code> is a vector and the first element is typically a keyword
which identifies the kind of event.</p>
<p>The event will be added to a FIFO processing queue, so event
handling does not happen immediately. It will happen 'very soon'
but not now. And if the queue already contains events, they
will be processed first.</p>
<p>Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:order</span> <span class="s">&quot;pizza&quot;</span> <span class="p">{</span><span class="ss">:supreme</span> <span class="mi">2</span> <span class="ss">:meatlovers</span> <span class="mi">1</span> <span class="ss">:veg</span> <span class="mi">1</span><span class="p">}])</span>
</code></pre></div>
</td></tr></table>

<h3 id="dispatch-sync">dispatch-sync<a class="headerlink" href="#dispatch-sync" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">dispatch-sync</span> <span class="nv">event</span><span class="p">)</span></code></p>
<p>Synchronously (immediately) process <code>event</code>. It does <strong>not</strong> queue
the event for handling later as <code>dispatch</code> does.</p>
<p><code>event</code> is a vector and the first element is typically a keyword
which identifies the kind of event.</p>
<p>It is an error to use <code>dispatch-sync</code> within an event handler because
you can't immediately process an new event when one is already
part way through being processed.</p>
<p>Generally, avoid using this function, and instead, use <code>dispatch</code>.
Only use it in the narrow set of cases where any delay in
processing is a problem:</p>
<ol>
<li>the <code>:on-change</code> handler of a text field where we are expecting fast typing</li>
<li>when initialising your app - see 'main' in examples/todomvc/src/core.cljs</li>
<li>in a unit test where immediate, synchronous processing is useful</li>
</ol>
<p>Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">dispatch-sync</span> <span class="p">[</span><span class="ss">:sing</span> <span class="ss">:falsetto</span> <span class="s">&quot;piano accordion&quot;</span><span class="p">])</span>
</code></pre></div>
</td></tr></table>

<h2 id="event-handlers">Event Handlers<a class="headerlink" href="#event-handlers" title="Permanent link">&para;</a></h2>
<h3 id="reg-event-db">reg-event-db<a class="headerlink" href="#reg-event-db" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-db</span> <span class="nv">id</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-db</span> <span class="nv">id</span> <span class="nv">interceptors</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p>Register the given event <code>handler</code> (function) for the given <code>id</code>. Optionally, provide
an <code>interceptors</code> chain:</p>
<ul>
<li><code>id</code> is typically a namespaced keyword  (but can be anything)</li>
<li><code>handler</code> is a function: (db event) -&gt; db</li>
<li><code>interceptors</code> is a collection of interceptors. Will be flattened and nils removed.</li>
</ul>
<p>Example Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-db</span>
  <span class="ss">:token</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="nv">event</span><span class="p">]</span>
    <span class="p">(</span><span class="nb">assoc </span><span class="nv">db</span> <span class="ss">:some-key</span> <span class="p">(</span><span class="nb">get </span><span class="nv">event</span> <span class="mi">2</span><span class="p">)))</span>  <span class="c1">;; return updated db</span>
</code></pre></div>
</td></tr></table>

<p>Or perhaps:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-db</span>
  <span class="ss">:namespaced/id</span>           <span class="c1">;; &lt;-- namespaced keywords are often used</span>
  <span class="p">[</span><span class="nv">one</span> <span class="nv">two</span> <span class="nv">three</span><span class="p">]</span>          <span class="c1">;; &lt;-- a seq of interceptors</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="p">[</span><span class="nv">_</span> <span class="nv">arg1</span> <span class="nv">arg2</span><span class="p">]]</span>   <span class="c1">;; &lt;-- event vector is destructured</span>
    <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">db</span>
      <span class="p">(</span><span class="nb">dissoc </span><span class="nv">arg1</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">update</span> <span class="ss">:key</span> <span class="nb">+ </span><span class="nv">arg2</span><span class="p">))))</span>   <span class="c1">;; return updated db</span>
</code></pre></div>
</td></tr></table>

<h3 id="reg-event-fx">reg-event-fx<a class="headerlink" href="#reg-event-fx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-fx</span> <span class="nv">id</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-fx</span> <span class="nv">id</span> <span class="nv">interceptors</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p>Register the given event <code>handler</code> (function) for the given <code>id</code>. Optionally, provide
an <code>interceptors</code> chain:</p>
<ul>
<li><code>id</code> is typically a namespaced keyword  (but can be anything)</li>
<li><code>handler</code> is a function: (coeffects-map event-vector) -&gt; effects-map</li>
<li><code>interceptors</code> is a collection of interceptors. Will be flattened and nils removed.</li>
</ul>
<p>Example Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-fx</span>
  <span class="ss">:event-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">cofx</span> <span class="nv">event</span><span class="p">]</span>
    <span class="p">{</span><span class="ss">:db</span> <span class="p">(</span><span class="nb">assoc </span><span class="p">(</span><span class="ss">:db</span> <span class="nv">cofx</span><span class="p">)</span> <span class="ss">:some-key</span> <span class="p">(</span><span class="nb">get </span><span class="nv">event</span> <span class="mi">2</span><span class="p">))}))</span>   <span class="c1">;; return a map of effects</span>
</code></pre></div>
</td></tr></table>

<p>Or perhaps:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-fx</span>
  <span class="ss">:namespaced/id</span>           <span class="c1">;; &lt;-- namespaced keywords are often used</span>
  <span class="p">[</span><span class="nv">one</span> <span class="nv">two</span> <span class="nv">three</span><span class="p">]</span>          <span class="c1">;; &lt;-- a seq of interceptors</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">db</span><span class="p">]</span> <span class="ss">:as</span> <span class="nv">cofx</span><span class="p">}</span> <span class="p">[</span><span class="nv">_</span> <span class="nv">arg1</span> <span class="nv">arg2</span><span class="p">]]</span> <span class="c1">;; destructure both arguments</span>
    <span class="p">{</span><span class="ss">:db</span> <span class="p">(</span><span class="nb">assoc </span><span class="nv">db</span> <span class="ss">:some-key</span> <span class="nv">arg1</span><span class="p">)</span>          <span class="c1">;; return a map of effects</span>
     <span class="ss">:fx</span> <span class="p">[[</span><span class="ss">:dispatch</span> <span class="p">[</span><span class="ss">:some-event</span> <span class="nv">arg2</span><span class="p">]]]}))</span>
</code></pre></div>
</td></tr></table>

<h3 id="reg-event-ctx">reg-event-ctx<a class="headerlink" href="#reg-event-ctx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-ctx</span> <span class="nv">id</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-event-ctx</span> <span class="nv">id</span> <span class="nv">interceptors</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p>Register the given event <code>handler</code> (function) for the given <code>id</code>. Optionally, provide
an <code>interceptors</code> chain:</p>
<ul>
<li><code>id</code> is typically a namespaced keyword  (but can be anything)</li>
<li><code>handler</code> is a function: context-map -&gt; context-map</li>
</ul>
<p>You can explore what is provided in <code>context</code> <a href="https://day8.github.io/re-frame/Interceptors/#what-is-context">here</a>.</p>
<p>Example Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-ctx</span>
  <span class="ss">:event-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">coeffects</span><span class="p">]</span> <span class="ss">:as</span> <span class="nv">context</span><span class="p">}]</span>
    <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">initial</span>  <span class="p">{</span><span class="ss">:db</span>     <span class="p">(</span><span class="ss">:db</span> <span class="nv">coeffects</span><span class="p">)</span>
                    <span class="ss">:event</span>  <span class="p">(</span><span class="ss">:event</span> <span class="nv">coeffects</span><span class="p">)</span>
                    <span class="ss">:fx</span>     <span class="p">[]}</span>
          <span class="nv">result</span>   <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">initial</span>
                       <span class="nv">function1</span>
                       <span class="nv">function2</span>
                       <span class="nv">function3</span><span class="p">)</span>
          <span class="nv">effects</span>  <span class="p">(</span><span class="nb">select-keys </span><span class="nv">result</span> <span class="p">[</span><span class="ss">:db</span> <span class="ss">:fx</span><span class="p">])]</span>
       <span class="p">(</span><span class="nb">assoc </span><span class="nv">context</span> <span class="ss">:effects</span> <span class="nv">effects</span><span class="p">))))</span>
</code></pre></div>
</td></tr></table>

<h3 id="clear-event">clear-event<a class="headerlink" href="#clear-event" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-event</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-event</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p>Unregisters event handlers (presumably registered previously via the use of <code>reg-event-db</code> or <code>reg-event-fx</code>).</p>
<p>When called with no args, it will unregister all currently registered event handlers.</p>
<p>When given one arg, assumed to be the <code>id</code> of a previously registered
event handler, it will unregister the associated handler. Will produce a warning to
console if it finds no matching registration.</p>
<h2 id="subscriptions">Subscriptions<a class="headerlink" href="#subscriptions" title="Permanent link">&para;</a></h2>
<h3 id="reg-sub">reg-sub<a class="headerlink" href="#reg-sub" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-sub</span> <span class="nv">query-id</span> <span class="o">&amp;</span> <span class="nv">args</span><span class="p">)</span></code></p>
<p>A call to <code>reg-sub</code> associates a <code>query-id</code> WITH two functions.</p>
<p>The two functions provide 'a mechanism' for creating a node
in the Signal Graph. When a node of type <code>query-id</code> is needed,
the two functions can be used to create it.</p>
<p>The three arguments are:</p>
<ul>
<li><code>query-id</code> - typically a namespaced keyword (later used in subscribe)</li>
<li>optionally, an <code>input signals</code> function which returns the input data
    flows required by this kind of node.</li>
<li>a <code>computation function</code> which computes the value (output) of the
    node (from the input data flows)</li>
</ul>
<p>Later, during app execution, a call to <code>(subscribe [:sub-id 3 :blue])</code>,
will trigger the need for a new <code>:sub-id</code> Signal Graph node (matching the
query <code>[:sub-id 3 :blue]</code>). And, to create that node the two functions
associated with <code>:sub-id</code> will be looked up and used.</p>
<p>Just to be clear: calling <code>reg-sub</code> does not immediately create a node.
It only registers 'a mechanism' (the two functions) by which nodes
can be created later, when a node is bought into existence by the
use of <code>subscribe</code> in a <code>View Function</code>.</p>
<p><code>reg-sub</code> arguments are:</p>
<ul>
<li>a <code>query-id</code> (typically a namespaced keyword)</li>
<li>a function which returns the inputs required by this kind of node (can be supplied  in one of three ways)</li>
<li>a function which computes the value of this kind of node (can be supplied in one of three ways)</li>
</ul>
<p>The <code>computation function</code> is always the last argument supplied and has three ways to be called.
Two of these methods are syntactic sugar to provide easier access to functional abstractions around your data.</p>
<ol>
<li>
<p>A function that will accept two parameters, the <code>input-values</code> and <code>query-vector</code>. This is the
   standard way to provide a <code>computation-function</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">input-values</span> <span class="nv">query-vector</span><span class="p">]</span>
    <span class="p">(</span><span class="ss">:foo</span> <span class="nv">input-values</span><span class="p">)))</span>
</code></pre></div>
</td></tr></table>

</li>
<li>
<p>A single sugary tuple of <code>:-&gt;</code> and a 1-arity <code>computation-function</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="ss">:-&gt;</span> <span class="nv">computation-fn</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>This sugary variation allows you to pass a function that will expect only one parameter,
namely the <code>input-values</code> and entirely omit the <code>query-vector</code>. A typical <code>computation-function</code>
expects two parameters which can cause unfortunate results when attempting to use
clojure standard library functions, or other functions, in a functional manner.</p>
<p>For example, a significant number of subscriptions exist only to get a value
from the <code>input-values</code>. As shown below, this subscription will simply retrieve
the value associated with the <code>:foo</code> key in our db:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="nv">_</span><span class="p">]</span>    <span class="c1">;; :&lt;---- trivial boilerplate we might want to skip over</span>
    <span class="p">(</span><span class="ss">:foo</span> <span class="nv">db</span><span class="p">)))</span>
</code></pre></div>
</td></tr></table>

<p>This is slightly more boilerplate than we might like to do,
as we can use a keyword directly as a function, and we might like to do this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="ss">:foo</span><span class="p">)</span>  <span class="c1">;; :&lt;---- This could be dangerous. If `:foo` is not in db, we get the `query-vector` instead of `nil`.</span>
</code></pre></div>
</td></tr></table>

<p>By using <code>:-&gt;</code> our function would not contain the <code>query-vector</code>, and any
missing keys would be represented as such:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="ss">:-&gt;</span> <span class="ss">:foo</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>This form allows us to ignore the <code>query-vector</code> if our <code>computation-function</code>
has no need for it, and be safe from any accidents. Any 1-arity function can be provided,
and for more complicated use cases, <code>partial</code>, <code>comp</code>, and anonymous functions can still be used.</p>
</li>
<li>
<p>A single sugary tuple of <code>:=&gt;</code> and a multi-arity <code>computation-function</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="ss">:=&gt;</span> <span class="nv">computation-fn</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>The <code>query-vector</code> can be broken into two components <code>[query-id &amp; optional-values]</code>, and
some subscriptions require the <code>optional-values</code> for extra work within the subscription.
To use them in variation #1, we need to destructure our <code>computation-function</code> parameters
in order to use them.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="p">[</span><span class="nv">_</span> <span class="nv">foo</span><span class="p">]]</span>
    <span class="p">[</span><span class="nv">db</span> <span class="nv">foo</span><span class="p">]))</span>
</code></pre></div>
</td></tr></table>

<p>Again we are writing boilerplate just to reach our values, and we might prefer to
have direction access through a parameter vector like <code>[input-values optional-values]</code>
instead, so we might be able to use a multi-arity function directly as our <code>computation-function</code>.
A rewrite of the above sub using this sugary syntax would look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="ss">:=&gt;</span> <span class="nv">vector</span><span class="p">)</span>  <span class="c1">;; :&lt;---- Could also be `(fn [db foo] [db foo])`</span>
</code></pre></div>
</td></tr></table>

</li>
</ol>
<p>The <code>computation function</code> is expected to take two arguments:</p>
<ul>
<li><code>input-values</code> - the values which flow into this node (how is it wired into the graph?)</li>
<li><code>query-vector</code> - the vector given to <code>subscribe</code></li>
</ul>
<p>and it returns a computed value (which then becomes the output of the node)</p>
<p>When <code>computation function</code> is called, the 2nd <code>query-vector</code> argument will be that
vector supplied to the <code>subscribe</code>. So, if the call was <code>(subscribe [:sub-id 3 :blue])</code>,
then the <code>query-vector</code> supplied to the computation function will be <code>[:sub-id 3 :blue]</code>.</p>
<p>The argument(s) supplied to <code>reg-sub</code> between <code>query-id</code> and the <code>computation-function</code>
can vary in 3 ways, but whatever is there defines the <code>input signals</code> part
of <code>the mechanism</code>, specifying what input values "flow into" the
<code>computation function</code> (as the 1st argument) when it is called.</p>
<p>So, <code>reg-sub</code> can be called in one of three ways, because there are three ways
to define the input signals part. But note, the 2nd method, in which a
<code>signals function</code> is explicitly supplied, is the most canonical and
instructive. The other two are really just sugary variations.</p>
<p><strong>First variation</strong> - no input signal function given:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="nv">a-computation-fn</span><span class="p">)</span>   <span class="c1">;; has signature:  (fn [db query-vec]  ... ret-value)</span>
</code></pre></div>
</td></tr></table>

<p>In the absence of an explicit <code>signals function</code>, the node's input signal defaults to <code>app-db</code>
   and, as a result, the value within <code>app-db</code> (a map) is
   given as the 1st argument when <code>a-computation-fn</code> is called.</p>
<p><strong>Second variation</strong> - a signal function is explicitly supplied:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="nv">signal-fn</span>     <span class="c1">;; &lt;-- here</span>
  <span class="nv">computation-fn</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>This is the most canonical and instructive of the three variations.</p>
<p>When a node is created from the template, the <code>signal function</code> will be called and it
is expected to return the input signal(s) as either a singleton, if there is only
one, or a sequence if there are many, or a map with the signals as the values.</p>
<p>The current values of the returned signals will be supplied as the 1st argument to
the <code>a-computation-fn</code> when it is called - and subject to what this <code>signal-fn</code> returns,
this value will be either a singleton, sequence or map of them (paralleling
the structure returned by the <code>signal function</code>).</p>
<p>This example <code>signal function</code> returns a 2-vector of input signals.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">query-vec</span> <span class="nv">dynamic-vec</span><span class="p">]</span>
   <span class="p">[(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:a-sub</span><span class="p">])</span>
    <span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:b-sub</span><span class="p">])])</span>
</code></pre></div>
</td></tr></table>

<p>The associated computation function must be written
to expect a 2-vector of values for its first argument:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">fn </span><span class="p">[[</span><span class="nv">a</span> <span class="nv">b</span><span class="p">]</span> <span class="nv">query-vec</span><span class="p">]</span>     <span class="c1">;; 1st argument is a seq of two values</span>
  <span class="nv">....</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>If, on the other hand, the signal function was simpler and returned a singleton, like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">query-vec</span> <span class="nv">dynamic-vec</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:a-sub</span><span class="p">]))</span>      <span class="c1">;; &lt;-- returning a singleton</span>
</code></pre></div>
</td></tr></table>

<p>then the associated computation function must be written to expect a single value
as the 1st argument:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">a</span> <span class="nv">query-vec</span><span class="p">]</span>       <span class="c1">;; 1st argument is a single value</span>
   <span class="nv">...</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Further Note: variation #1 above, in which an <code>signal-fn</code> was not supplied, like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="nv">a-computation-fn</span><span class="p">)</span>   <span class="c1">;; has signature:  (fn [db query-vec]  ... ret-value)</span>
</code></pre></div>
</td></tr></table>

<p>is the equivalent of using this
2nd variation and explicitly supplying a <code>signal-fn</code> which returns <code>app-db</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:query-id</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">_</span> <span class="nv">_</span><span class="p">]</span>  <span class="nv">re-frame/app-db</span><span class="p">)</span>   <span class="c1">;; &lt;--- explicit signal-fn</span>
  <span class="nv">a-computation-fn</span><span class="p">)</span>             <span class="c1">;; has signature:  (fn [db query-vec]  ... ret-value)</span>
</code></pre></div>
</td></tr></table>

<p><strong>Third variation</strong> - syntax Sugar</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:a-b-sub</span>
  <span class="ss">:&lt;-</span> <span class="p">[</span><span class="ss">:a-sub</span><span class="p">]</span>
  <span class="ss">:&lt;-</span> <span class="p">[</span><span class="ss">:b-sub</span><span class="p">]</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[[</span><span class="nv">a</span> <span class="nv">b</span><span class="p">]</span> <span class="nv">query-vec</span><span class="p">]</span>    <span class="c1">;; 1st argument is a seq of two values</span>
    <span class="p">{</span><span class="ss">:a</span> <span class="nv">a</span> <span class="ss">:b</span> <span class="nv">b</span><span class="p">}))</span>
</code></pre></div>
</td></tr></table>

<p>This 3rd variation is just syntactic sugar for the 2nd.  Instead of providing an
<code>signals-fn</code> you provide one or more pairs of <code>:&lt;-</code> and a subscription vector.</p>
<p>If you supply only one pair a singleton will be supplied to the computation function,
as if you had supplied a <code>signal-fn</code> returning only a single value:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:a-sub</span>
  <span class="ss">:&lt;-</span> <span class="p">[</span><span class="ss">:a-sub</span><span class="p">]</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">a</span> <span class="nv">query-vec</span><span class="p">]</span>      <span class="c1">;; only one pair, so 1st argument is a single value</span>
    <span class="nv">...</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>Syntactic sugar for both the <code>signal-fn</code> and <code>computation-fn</code> can be used together
and the direction of arrows shows the flow of data and functions. The example from
directly above is reproduced here:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-sub</span>
  <span class="ss">:a-b-sub</span>
  <span class="ss">:&lt;-</span> <span class="p">[</span><span class="ss">:a-sub</span><span class="p">]</span>
  <span class="ss">:&lt;-</span> <span class="p">[</span><span class="ss">:b-sub</span><span class="p">]</span>
  <span class="ss">:-&gt;</span> <span class="p">(</span><span class="nb">partial zipmap </span><span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span><span class="p">]))</span>
</code></pre></div>
</td></tr></table>

<p>For further understanding, read the tutorials, and look at the detailed comments in
/examples/todomvc/src/subs.cljs.</p>
<p>See also: <code>subscribe</code></p>
<h3 id="subscribe">subscribe<a class="headerlink" href="#subscribe" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">subscribe</span> <span class="nv">query</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">subscribe</span> <span class="nv">query</span> <span class="nv">dynv</span><span class="p">)</span></code></p>
<p>Given a <code>query</code> vector, returns a Reagent <code>reaction</code> which will, over
time, reactively deliver a stream of values. So, in FRP-ish terms,
it returns a <code>Signal</code>.</p>
<p>To obtain the current value from the Signal, it must be dereferenced:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">signal</span> <span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:items</span><span class="p">])</span>
      <span class="nv">value</span>  <span class="p">(</span><span class="nb">deref </span><span class="nv">signal</span><span class="p">)]</span>     <span class="c1">;; could be written as @signal</span>
  <span class="nv">...</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>which is typically written tersely as simple:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">items</span>  <span class="o">@</span><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:items</span><span class="p">])]</span>
  <span class="nv">...</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><code>query</code> is a vector of at least one element. The first element is the
<code>query-id</code>, typically a namespaced keyword. The rest of the vector's
elements are optional, additional values which parameterise the query
performed.</p>
<p><code>dynv</code> is an optional 3rd argument, which is a vector of further input
signals (atoms, reactions, etc), NOT values. This argument exists for
historical reasons and is borderline deprecated these days.</p>
<p><strong>Example Usage</strong>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:items</span><span class="p">])</span>
<span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:items</span> <span class="s">&quot;blue&quot;</span> <span class="ss">:small</span><span class="p">])</span>
<span class="p">(</span><span class="nf">subscribe</span> <span class="p">[</span><span class="ss">:items</span> <span class="p">{</span><span class="ss">:colour</span> <span class="s">&quot;blue&quot;</span>  <span class="ss">:size</span> <span class="ss">:small</span><span class="p">}])</span>
</code></pre></div>
</td></tr></table>

<p>Note: for any given call to <code>subscribe</code> there must have been a previous call
to <code>reg-sub</code>, registering the query handler (functions) associated with
<code>query-id</code>.</p>
<p><strong>Hint</strong></p>
<p>When used in a view function BE SURE to <code>deref</code> the returned value.
In fact, to avoid any mistakes, some prefer to define:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">&lt;sub</span>  <span class="p">(</span><span class="nb">comp deref </span><span class="nv">re-frame.core/subscribe</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>And then, within their views, they call  <code>(&lt;sub [:items :small])</code> rather
than using <code>subscribe</code> directly.</p>
<p><strong>De-duplication</strong></p>
<p>Two, or more, concurrent subscriptions for the same query will
source reactive updates from the one executing handler.</p>
<p>See also: <code>reg-sub</code></p>
<h3 id="clear-sub">clear-sub<a class="headerlink" href="#clear-sub" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-sub</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-sub</span> <span class="nv">query-id</span><span class="p">)</span></code></p>
<p>Unregisters subscription handlers (presumably registered previously via the use of <code>reg-sub</code>).</p>
<p>When called with no args, it will unregister all currently registered subscription handlers.</p>
<p>When given one arg, assumed to be the <code>id</code> of a previously registered
subscription handler, it will unregister the associated handler. Will produce a warning to
console if it finds no matching registration.</p>
<p>NOTE: Depending on the usecase, it may be necessary to call <code>clear-subscription-cache!</code> afterwards</p>
<h3 id="reg-sub-raw">reg-sub-raw<a class="headerlink" href="#reg-sub-raw" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-sub-raw</span> <span class="nv">query-id</span> <span class="nv">handler-fn</span><span class="p">)</span></code></p>
<p>This is a low level, advanced function.  You should probably be
using <code>reg-sub</code> instead.</p>
<p>Some explanation is available in the docs at
<a href="http://day8.github.io/re-frame/flow-mechanics/" target="_blank">http://day8.github.io/re-frame/flow-mechanics/</a></p>
<h3 id="clear-subscription-cache">clear-subscription-cache!<a class="headerlink" href="#clear-subscription-cache" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-subscription-cache!</span><span class="p">)</span></code></p>
<p>Removes all subscriptions from the cache.</p>
<p>This function can be used at development time or test time. Useful when hot reloading
namespaces containing subscription handlers. Also call it after a React/render exception,
because React components won't have been cleaned up properly. And this, in turn, means
the subscriptions within those components won't have been cleaned up correctly. So this
forces the issue.</p>
<h2 id="effect-handlers">Effect Handlers<a class="headerlink" href="#effect-handlers" title="Permanent link">&para;</a></h2>
<h3 id="reg-fx">reg-fx<a class="headerlink" href="#reg-fx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-fx</span> <span class="nv">id</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p>Register the given effect <code>handler</code> for the given <code>id</code>:</p>
<ul>
<li><code>id</code> is keyword, often namespaced.</li>
<li><code>handler</code> is a side-effecting function which takes a single argument and whose return
    value is ignored.</li>
</ul>
<p>To use, first, associate <code>:effect2</code> with a handler:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-fx</span>
   <span class="ss">:effect2</span>
   <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">value</span><span class="p">]</span>
      <span class="nv">...</span> <span class="k">do </span><span class="nv">something</span> <span class="nv">side-effect-y</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>Then, later, if an event handler were to return this effects map:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="ss">:effect2</span>  <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span><span class="p">]}</span>
</code></pre></div>
</td></tr></table>

<p>then the <code>handler</code> <code>fn</code> we registered previously, using <code>reg-fx</code>, will be
called with an argument of <code>[1 2]</code>.</p>
<h3 id="clear-fx">clear-fx<a class="headerlink" href="#clear-fx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-fx</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-fx</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p>Unregisters effect handlers (presumably registered previously via the use of <code>reg-fx</code>).</p>
<p>When called with no args, it will unregister all currently registered effect handlers.</p>
<p>When given one arg, assumed to be the <code>id</code> of a previously registered
effect handler, it will unregister the associated handler. Will produce a warning to
console if it finds no matching registration.</p>
<h2 id="coeffects">Coeffects<a class="headerlink" href="#coeffects" title="Permanent link">&para;</a></h2>
<h3 id="reg-cofx">reg-cofx<a class="headerlink" href="#reg-cofx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-cofx</span> <span class="nv">id</span> <span class="nv">handler</span><span class="p">)</span></code></p>
<p>Register the given coeffect <code>handler</code> for the given <code>id</code>, for later use
within <code>inject-cofx</code>:</p>
<ul>
<li><code>id</code> is keyword, often namespaced.</li>
<li><code>handler</code> is a function which takes either one or two arguments, the first of which is
     always <code>coeffects</code> and which returns an updated <code>coeffects</code>.</li>
</ul>
<p>See also: <code>inject-cofx</code></p>
<h3 id="inject-cofx">inject-cofx<a class="headerlink" href="#inject-cofx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">inject-cofx</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">inject-cofx</span> <span class="nv">id</span> <span class="nv">value</span><span class="p">)</span></code></p>
<p>Given an <code>id</code>, and an optional, arbitrary <code>value</code>, returns an interceptor
whose <code>:before</code> adds to the <code>:coeffects</code> (map) by calling a pre-registered
'coeffect handler' identified by the <code>id</code>.</p>
<p>The previous association of a <code>coeffect handler</code> with an <code>id</code> will have
happened via a call to <code>re-frame.core/reg-cofx</code> - generally on program startup.</p>
<p>Within the created interceptor, this 'looked up' <code>coeffect handler</code> will
be called (within the <code>:before</code>) with two arguments:</p>
<ul>
<li>the current value of <code>:coeffects</code></li>
<li>optionally, the originally supplied arbitrary <code>value</code></li>
</ul>
<p>This <code>coeffect handler</code> is expected to modify and return its first, <code>coeffects</code> argument.</p>
<p><strong>Example of <code>inject-cofx</code> and <code>reg-cofx</code> working together</strong></p>
<p>First - Early in app startup, you register a <code>coeffect handler</code> for <code>:datetime</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">re-frame.core/reg-cofx</span>
  <span class="ss">:datetime</span>                        <span class="c1">;; usage  (inject-cofx :datetime)</span>
  <span class="p">(</span><span class="k">fn </span><span class="nv">coeffect-handler</span>
    <span class="p">[</span><span class="nv">coeffect</span><span class="p">]</span>
    <span class="p">(</span><span class="nb">assoc </span><span class="nv">coeffect</span> <span class="ss">:now</span> <span class="p">(</span><span class="nf">js/Date.</span><span class="p">))))</span>   <span class="c1">;; modify and return first arg</span>
</code></pre></div>
</td></tr></table>

<p>Second - Later, add an interceptor to an -fx event handler, using <code>inject-cofx</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">re-frame.core/reg-event-fx</span>            <span class="c1">;; when registering an event handler</span>
  <span class="ss">:event-id</span>
  <span class="p">[</span> <span class="nv">...</span> <span class="p">(</span><span class="nf">inject-cofx</span> <span class="ss">:datetime</span><span class="p">)</span> <span class="nv">...</span> <span class="p">]</span>  <span class="c1">;; &lt;-- create an injecting interceptor</span>
  <span class="p">(</span><span class="k">fn </span><span class="nv">event-handler</span>
    <span class="p">[</span><span class="nv">coeffect</span> <span class="nv">event</span><span class="p">]</span>
      <span class="c1">;;... in here can access (:now coeffect) to obtain current datetime ...</span>
    <span class="p">)))</span>
</code></pre></div>
</td></tr></table>

<p><strong>Background</strong></p>
<p><code>coeffects</code> are the input resources required by an event handler
to perform its job. The two most obvious ones are <code>db</code> and <code>event</code>.
But sometimes an event handler might need other resources.</p>
<p>Perhaps an event handler needs a random number or a GUID or the current
datetime. Perhaps it needs access to a DataScript database connection.</p>
<p>If an event handler directly accesses these resources, it stops being
pure and, consequently, it becomes harder to test, etc. So we don't
want that.</p>
<p>Instead, the interceptor created by this function is a way to 'inject'
'necessary resources' into the <code>:coeffects</code> (map) subsequently given
to the event handler at call time.</p>
<p>See also <code>reg-cofx</code></p>
<h3 id="clear-cofx">clear-cofx<a class="headerlink" href="#clear-cofx" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-cofx</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-cofx</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p>Unregisters coeffect handlers (presumably registered previously via the use of <code>reg-cofx</code>).</p>
<p>When called with no args, it will unregister all currently registered coeffect handlers.</p>
<p>When given one arg, assumed to be the <code>id</code> of a previously registered
coeffect handler, it will unregister the associated handler. Will produce a warning to
console if it finds no matching registration.</p>
<h2 id="interceptors">Interceptors<a class="headerlink" href="#interceptors" title="Permanent link">&para;</a></h2>
<h3 id="debug">debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h3>
<p>An interceptor which logs/instruments an event handler's actions to
<code>re-frame/console</code> at the <code>:log</code> level.</p>
<p>Output includes:</p>
<ol>
<li>the event vector</li>
<li>a <code>clojure.data/diff</code> of db, before vs after, which shows
     the changes caused by the event handler. To understand the output,
     you should understand:
     <a href="https://clojuredocs.org/clojure.data/diff" target="_blank">https://clojuredocs.org/clojure.data/diff</a>.</li>
</ol>
<p>You'd typically include this interceptor after (to the right of) any
<code>path</code> interceptor.</p>
<p>Warning:  calling <code>clojure.data/diff</code> on large, complex data structures
can be slow. So, you won't want this interceptor present in production
code. So, you should condition it out like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">re-frame.core/reg-event-db</span>
  <span class="ss">:evt-id</span>
  <span class="p">[(</span><span class="nb">when </span><span class="o">^</span><span class="nb">boolean </span><span class="nv">goog.DEBUG</span> <span class="nv">re-frame.core/debug</span><span class="p">)]</span>  <span class="c1">;; &lt;-- conditional</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="nv">v</span><span class="p">]</span>
     <span class="nv">...</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>To make this code fragment work, you'll also have to set <code>goog.DEBUG</code> to
<code>false</code> in your production builds. For an example, look in <code>project.clj</code> of /examples/todomvc.</p>
<h3 id="path">path<a class="headerlink" href="#path" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nb">path </span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">)</span></code></p>
<p>Returns an interceptor which acts somewhat like <code>clojure.core/update-in</code>, in the sense that
the event handler is given a specific part of <code>app-db</code> to change, not all of <code>app-db</code>.</p>
<p>The interceptor has both a <code>:before</code> and <code>:after</code> functions. The <code>:before</code> replaces
the <code>:db</code> key within coeffects with a sub-path within <code>app-db</code>. The <code>:after</code> reverses the process,
and it grafts the handler's return value back into db, at the right path.</p>
<p>Examples:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nb">path </span><span class="ss">:some</span> <span class="ss">:path</span><span class="p">)</span>
<span class="p">(</span><span class="nb">path </span><span class="p">[</span><span class="ss">:some</span> <span class="ss">:path</span><span class="p">])</span>
<span class="p">(</span><span class="nb">path </span><span class="p">[</span><span class="ss">:some</span> <span class="ss">:path</span><span class="p">]</span> <span class="ss">:to</span> <span class="ss">:here</span><span class="p">)</span>
<span class="p">(</span><span class="nb">path </span><span class="p">[</span><span class="ss">:some</span> <span class="ss">:path</span><span class="p">]</span> <span class="p">[</span><span class="ss">:to</span><span class="p">]</span> <span class="ss">:here</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>Example Use:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-db</span>
  <span class="ss">:event-id</span>
  <span class="p">(</span><span class="nb">path </span><span class="p">[</span><span class="ss">:a</span> <span class="ss">:b</span><span class="p">])</span>  <span class="c1">;; &lt;-- used here, in interceptor chain</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">b</span> <span class="nv">v</span><span class="p">]</span>       <span class="c1">;; 1st arg is not db. Is the value from path [:a :b] within db</span>
    <span class="nv">...</span> <span class="nv">new-b</span><span class="p">))</span>   <span class="c1">;; returns a new value for that path (not the entire db)</span>
</code></pre></div>
</td></tr></table>

<p>Notes:</p>
<ol>
<li><code>path</code> may appear more than once in an interceptor chain. Progressive narrowing.</li>
<li>if <code>:effects</code> contains no <code>:db</code> effect, can't graft a value back in.</li>
</ol>
<h3 id="enrich">enrich<a class="headerlink" href="#enrich" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">enrich</span> <span class="nv">f</span><span class="p">)</span></code></p>
<p>Returns an interceptor which will run the given function <code>f</code> in the <code>:after</code>
position.</p>
<p><code>f</code> is called with two arguments: <code>db</code> and <code>event</code>, and is expected to
return a modified <code>db</code>.</p>
<p>Unlike the <code>after</code> interceptor which is only about side effects, <code>enrich</code>
expects <code>f</code> to process and alter the given <code>db</code> coeffect in some useful way,
contributing to the derived data, flowing vibe.</p>
<p>If <code>f</code> returns <code>nil</code>, the <code>db</code> value passed to <code>f</code> will be returned instead.</p>
<h4>Example Use:</h4>
<p>Imagine that todomvc needed to do duplicate detection - if any two todos had
the same text, then highlight their background, and report them via a warning
at the bottom of the panel.</p>
<p>Almost any user action (edit text, add new todo, remove a todo) requires a
complete reassessment of duplication errors and warnings. E.g. that edit
just made might have introduced a new duplicate, or removed one. Same with
any todo removal. So we need to re-calculate warnings after any CRUD events
associated with the todos list.</p>
<p>Unless we are careful, we might end up coding subtly different checks
for each kind of CRUD operation.  The duplicates check made after
'delete todo' event might be subtly different to that done after an
editing operation. Nice and efficient, but fiddly. A bug generator
approach.</p>
<p>So, instead, we create an <code>f</code> which recalculates ALL warnings from scratch
every time there is ANY change. It will inspect all the todos, and
reset ALL FLAGS every time (overwriting what was there previously)
and fully recalculate the list of duplicates (displayed at the bottom?).</p>
<p><a href="https://twitter.com/nathanmarz/status/879722740776939520" target="_blank">https://twitter.com/nathanmarz/status/879722740776939520</a></p>
<p>By applying <code>f</code> in an <code>:enrich</code> interceptor, after every CRUD event,
we keep the handlers simple and yet we ensure this important step
(of getting warnings right) is not missed on any change.</p>
<p>We can test <code>f</code> easily - it is a pure function - independently of
any CRUD operation.</p>
<p>This brings huge simplicity at the expense of some re-computation
each time. This may be a very satisfactory trade-off in many cases.</p>
<h4>Returning nil</h4>
<p>In some cases, it's useful to apply a change to specific situations that can
be determined at runtime instead of when defining the handler with an
<code>:enrich</code> interceptor. Instead of forcing you to return the <code>db</code> from every
non-applicable branch, you can return <code>nil</code> to use the given <code>db</code> value:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">set-last-update</span>
  <span class="p">(</span><span class="nf">core/enrich</span>
    <span class="p">(</span><span class="k">fn </span><span class="p">[{</span><span class="nv">db</span> <span class="ss">:db</span><span class="p">}</span> <span class="p">[</span><span class="nv">_</span> <span class="p">{</span><span class="nv">user</span> <span class="ss">:user</span><span class="p">}]]</span>
      <span class="p">(</span><span class="nb">when </span><span class="p">(</span><span class="nf">active-user?</span> <span class="nv">user</span><span class="p">)</span>  <span class="c1">;; &lt;- Only perform an update if user is active</span>
        <span class="nv">...</span><span class="p">))))</span>
</code></pre></div>
</td></tr></table>

<h3 id="unwrap">unwrap<a class="headerlink" href="#unwrap" title="Permanent link">&para;</a></h3>
<blockquote>
<p>New in v1.2.0</p>
</blockquote>
<p>An interceptor which decreases the amount of destructuring necessary in an
 event handler where the event is structured as a 2-vector of
 [event-id payload-map].</p>
<p>It promotes the <code>payload-map</code> part to be the event ultimately given to the
 event handler. Should you want the full original event, it can be found in
 <code>coeffects</code> under the key <code>:original-event</code>.</p>
<p>If a dispatch looked like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code> <span class="p">(</span><span class="nf">dispatch</span> <span class="p">[</span><span class="ss">:event-id</span> <span class="p">{</span><span class="ss">:x</span> <span class="mi">1</span> <span class="ss">:y</span> <span class="mi">2</span> <span class="ss">:z</span> <span class="mi">3</span><span class="p">}])</span>
</code></pre></div>
</td></tr></table>

<p>Your event handlers can look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code> <span class="p">(</span><span class="nf">reg-event-fx</span>
   <span class="ss">:event-id</span>
   <span class="p">[</span><span class="nv">...</span> <span class="nv">unwrap</span> <span class="nv">...</span><span class="p">]</span>                    <span class="c1">;; &lt;-- added to the interceptors</span>
   <span class="p">(</span><span class="k">fn </span><span class="p">[{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">db</span><span class="p">]}</span> <span class="p">{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">]}]</span>  <span class="c1">;; &lt;-- instead of [_ {:keys [x y z]}]</span>
     <span class="nv">...</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3 id="trim-v">trim-v<a class="headerlink" href="#trim-v" title="Permanent link">&para;</a></h3>
<p>An interceptor which removes the first element of the event vector,
before it is supplied to the event handler, allowing you to write more
 aesthetically pleasing event handlers. No leading underscore on the event-v!</p>
<p>Should you want the full original event, it can be found in <code>coeffects</code> under
the key <code>:original-event</code>.</p>
<p>Your event handlers will look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">reg-event-db</span>
  <span class="ss">:event-id</span>
  <span class="p">[</span><span class="nv">...</span> <span class="nv">trim-v</span> <span class="nv">...</span><span class="p">]</span>    <span class="c1">;; &lt;-- added to the interceptors</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="p">[</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">]]</span>    <span class="c1">;; &lt;-- instead of [_ x y z]</span>
    <span class="nv">...</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3 id="after">after<a class="headerlink" href="#after" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">after</span> <span class="nv">f</span><span class="p">)</span></code></p>
<p>Returns an interceptor which runs the given function <code>f</code> in the <code>:after</code>
position, presumably for side effects.</p>
<p><code>f</code> is called with two arguments: the <code>:effects</code> value for <code>:db</code>
(or the <code>:coeffect</code> value of <code>:db</code> if no <code>:db</code> effect is returned) and the event.
Its return value is ignored, so <code>f</code> can only side-effect.</p>
<p>An example of use can be seen in the re-frame github repo in <code>/examples/todomvc/events.cljs</code>:</p>
<ul>
<li><code>f</code> runs schema validation (reporting any errors found).</li>
<li><code>f</code> writes to localstorage.</li>
</ul>
<h3 id="on-changes">on-changes<a class="headerlink" href="#on-changes" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">on-changes</span> <span class="nv">f</span> <span class="nv">out-path</span> <span class="o">&amp;</span> <span class="nv">in-paths</span><span class="p">)</span></code></p>
<p>Returns an interceptor which will observe N paths within <code>db</code>, and if any of them
test not <code>identical?</code> to their previous value  (as a result of a event handler
being run), then it will run <code>f</code> to compute a new value, which is then assoc-ed
into the given <code>out-path</code> within <code>db</code>.</p>
<p>Example Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">my-f</span>
  <span class="p">[</span><span class="nv">a-val</span> <span class="nv">b-val</span><span class="p">]</span>
  <span class="nv">...</span> <span class="nb">some </span><span class="nv">computation</span> <span class="nv">on</span> <span class="nv">a</span> <span class="nb">and </span><span class="nv">b</span> <span class="nv">in</span> <span class="nv">here</span><span class="p">)</span>

<span class="c1">;; use it</span>
<span class="p">(</span><span class="k">def </span><span class="nv">my-interceptor</span> <span class="p">(</span><span class="nf">on-changes</span> <span class="nv">my-f</span> <span class="p">[</span><span class="ss">:c</span><span class="p">]</span> <span class="p">[</span><span class="ss">:a</span><span class="p">]</span> <span class="p">[</span><span class="ss">:b</span><span class="p">]))</span>

<span class="p">(</span><span class="nf">reg-event-db</span>
  <span class="ss">:event-id</span>
  <span class="p">[</span><span class="nv">...</span> <span class="nv">my-interceptor</span> <span class="nv">...</span><span class="p">]</span>  <span class="c1">;; &lt;-- ultimately used here</span>
  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">db</span> <span class="nv">v</span><span class="p">]</span>
     <span class="nv">...</span><span class="p">))</span>
</code></pre></div>
</td></tr></table>

<p>If you put this interceptor on handlers which might change paths <code>:a</code> or <code>:b</code>,
it will:</p>
<ul>
<li>call <code>f</code> each time the value at path <code>[:a]</code> or <code>[:b]</code> changes</li>
<li>call <code>f</code> with the values extracted from <code>[:a]</code> <code>[:b]</code></li>
<li>assoc the return value from <code>f</code> into the path  <code>[:c]</code></li>
</ul>
<h2 id="global-interceptors">Global Interceptors<a class="headerlink" href="#global-interceptors" title="Permanent link">&para;</a></h2>
<h3 id="reg-global-interceptor">reg-global-interceptor<a class="headerlink" href="#reg-global-interceptor" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">reg-global-interceptor</span> <span class="nv">interceptor</span><span class="p">)</span></code></p>
<p>Registers the given <code>interceptor</code> as a global interceptor. Global interceptors are
 included in the processing chain of every event.</p>
<p>When you register an event handler, you have the option of supplying an
 interceptor chain. Any global interceptors you register are effectively
 prepending to this chain.</p>
<p>Global interceptors are run in the order that they are registered.</p>
<h3 id="clear-global-interceptor">clear-global-interceptor<a class="headerlink" href="#clear-global-interceptor" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-global-interceptor</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">clear-global-interceptor</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p>Unregisters global interceptors (presumably registered previously via the use of <code>reg-global-interceptor</code>).</p>
<p>When called with no args, it will unregister all currently registered global interceptors.</p>
<p>When given one arg, assumed to be the <code>id</code> of a previously registered
global interceptors, it will unregister the associated interceptor. Will produce a warning to
console if it finds no matching registration.</p>
<h2 id="writing-interceptors">Writing Interceptors<a class="headerlink" href="#writing-interceptors" title="Permanent link">&para;</a></h2>
<h3 id="-interceptor">-&gt;interceptor<a class="headerlink" href="#-interceptor" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">-&gt;interceptor</span> <span class="o">&amp;</span> <span class="p">{</span><span class="ss">:as</span> <span class="nv">m</span>, <span class="ss">:keys</span> <span class="p">[</span><span class="nv">id</span> <span class="nv">before</span> <span class="nv">after</span><span class="p">]})</span></code></p>
<p>A utility function for creating interceptors.</p>
<p>Accepts three optional, named arguments:</p>
<ul>
<li><code>:id</code> - an id for the interceptor (decorative only)</li>
<li><code>:before</code> - the interceptor's before function</li>
<li><code>:after</code>  - the interceptor's after function</li>
</ul>
<p>Example use:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">my-interceptor</span>
  <span class="p">(</span><span class="nf">-&gt;interceptor</span>
   <span class="ss">:id</span>     <span class="ss">:my-interceptor</span>
   <span class="ss">:before</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">context</span><span class="p">]</span>
             <span class="nv">...</span> <span class="nv">modifies</span> <span class="nb">and </span><span class="nv">returns</span> <span class="o">`</span><span class="nv">context</span><span class="o">`</span><span class="p">)</span>
   <span class="ss">:after</span>  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">context</span><span class="p">]</span>
             <span class="nv">...</span> <span class="nv">modifies</span> <span class="nb">and </span><span class="nv">returns</span> <span class="o">`</span><span class="nv">context</span><span class="o">`</span><span class="p">)))</span>
</code></pre></div>
</td></tr></table>

<p>Notes:</p>
<ul>
<li><code>:before</code> functions modify and return their <code>context</code> argument. Sometimes they
    only side effect, in which case, they'll perform the side effect and return
    <code>context</code> unchanged.</li>
<li><code>:before</code> functions often modify the <code>:coeffects</code> map within <code>context</code> and,
    if they do, then they should use the utility functions <code>get-coeffect</code> and
    <code>assoc-coeffect</code>.</li>
<li><code>:after</code> functions modify and return their <code>context</code> argument. Sometimes they
    only side effect, in which case, they'll perform the side effect and return
    <code>context</code> unchanged.</li>
<li><code>:after</code> functions often modify the <code>:effects</code> map within <code>context</code> and,
    if they do, then they should use the utility functions <code>get-effect</code>
    and <code>assoc-effect</code></li>
</ul>
<h3 id="get-coeffect">get-coeffect<a class="headerlink" href="#get-coeffect" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-coeffect</span> <span class="nv">context</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-coeffect</span> <span class="nv">context</span> <span class="nv">key</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-coeffect</span> <span class="nv">context</span> <span class="nb">key </span><span class="nv">not-found</span><span class="p">)</span></code></p>
<p>A utility function, typically used when writing an interceptor's <code>:before</code> function.</p>
<p>When called with one argument, it returns the <code>:coeffects</code> map from within that <code>context</code>.</p>
<p>When called with two or three arguments, behaves like <code>clojure.core/get</code> and
 returns the value mapped to <code>key</code> in the <code>:coeffects</code> map within <code>context</code>, <code>not-found</code> or
 <code>nil</code> if <code>key</code> is not present.</p>
<h3 id="assoc-coeffect">assoc-coeffect<a class="headerlink" href="#assoc-coeffect" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">assoc-coeffect</span> <span class="nv">context</span> <span class="nb">key </span><span class="nv">value</span><span class="p">)</span></code></p>
<p>A utility function, typically used when writing an interceptor's <code>:before</code> function.</p>
<p>Adds or updates a key/value pair in the <code>:coeffects</code> map within <code>context</code>. </p>
<h3 id="get-effect">get-effect<a class="headerlink" href="#get-effect" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-effect</span> <span class="nv">context</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-effect</span> <span class="nv">context</span> <span class="nv">key</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">get-effect</span> <span class="nv">context</span> <span class="nb">key </span><span class="nv">not-found</span><span class="p">)</span></code></p>
<p>A utility function, used when writing interceptors, typically within an <code>:after</code> function.</p>
<p>When called with one argument, returns the <code>:effects</code> map from the <code>context</code>.</p>
<p>When called with two or three arguments, behaves like <code>clojure.core/get</code> and
 returns the value mapped to <code>key</code> in the effects map, <code>not-found</code> or
 <code>nil</code> if <code>key</code> is not present.</p>
<h3 id="assoc-effect">assoc-effect<a class="headerlink" href="#assoc-effect" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">assoc-effect</span> <span class="nv">context</span> <span class="nb">key </span><span class="nv">value</span><span class="p">)</span></code></p>
<p>A utility function, typically used when writing an interceptor's <code>:after</code> function.</p>
<p>Adds or updates a key/value pair in the <code>:effects</code> map within <code>context</code>. </p>
<h3 id="enqueue">enqueue<a class="headerlink" href="#enqueue" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">enqueue</span> <span class="nv">context</span> <span class="nv">interceptors</span><span class="p">)</span></code></p>
<p>A utility function, used when writing an interceptor's <code>:before</code> function.</p>
<p>Adds the given collection of <code>interceptors</code> to those already in <code>context's</code>
execution <code>:queue</code>. It returns the updated <code>context</code>.</p>
<p>So, it provides a way for one interceptor to add more interceptors to the
currently executing interceptor chain.</p>
<h2 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h2>
<h3 id="set-loggers">set-loggers!<a class="headerlink" href="#set-loggers" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">set-loggers!</span> <span class="nv">new-loggers</span><span class="p">)</span></code></p>
<p>re-frame outputs warnings and errors via the API function <code>console</code>
 which, by default, delegates to <code>js/console</code>'s default implementation for
<code>log</code>, <code>error</code>, <code>warn</code>, <code>debug</code>, <code>group</code> and <code>groupEnd</code>. But, using this function,
 you can override that behaviour with your own functions.</p>
<p>The argument <code>new-loggers</code> should be a map containing a subset of they keys
for the standard <code>loggers</code>, namely  <code>:log</code> <code>:error</code> <code>:warn</code> <code>:debug</code> <code>:group</code>
or <code>:groupEnd</code>.</p>
<p>Example Usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">my-logger</span>      <span class="c1">;; my alternative logging function</span>
  <span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">post-it-somewhere</span> <span class="p">(</span><span class="nb">apply str </span><span class="nv">args</span><span class="p">)))</span>

<span class="c1">;; now install my alternative loggers</span>
<span class="p">(</span><span class="nf">re-frame.core/set-loggers!</span>  <span class="p">{</span><span class="ss">:warn</span> <span class="nv">my-logger</span> <span class="ss">:log</span> <span class="nv">my-logger</span><span class="p">})</span>
</code></pre></div>
</td></tr></table>

<h3 id="console">console<a class="headerlink" href="#console" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">console</span> <span class="nv">level</span> <span class="o">&amp;</span> <span class="nv">args</span><span class="p">)</span></code></p>
<p>A utility logging function which is used internally within re-frame to produce
warnings and other output. It can also be used by libraries which
extend re-frame, such as effect handlers.</p>
<p>By default, it will output the given <code>args</code> to <code>js/console</code> at the given log <code>level</code>.
However, an application using re-frame can redirect <code>console</code> output via <code>set-loggers!</code>.</p>
<p><code>level</code> can be one of <code>:log</code>, <code>:error</code>, <code>:warn</code>, <code>:debug</code>, <code>:group</code> or <code>:groupEnd</code>.</p>
<p>Example usage:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="nf">console</span> <span class="ss">:error</span> <span class="s">&quot;Sure enough it happened:&quot;</span> <span class="nv">a-var</span> <span class="s">&quot;and&quot;</span> <span class="nv">another</span><span class="p">)</span>
<span class="p">(</span><span class="nf">console</span> <span class="ss">:warn</span> <span class="s">&quot;Possible breach of containment wall at:&quot;</span> <span class="nv">dt</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="miscellaneous">Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permanent link">&para;</a></h2>
<h3 id="make-restore-fn">make-restore-fn<a class="headerlink" href="#make-restore-fn" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">make-restore-fn</span><span class="p">)</span></code></p>
<p>This is a utility function, typically used in testing.</p>
<p>It checkpoints the current state of re-frame and returns a function which, when
later called, will restore re-frame to the checkpointed state.</p>
<p>The checkpoint includes <code>app-db</code>, all registered handlers and all subscriptions.</p>
<h3 id="purge-event-queue">purge-event-queue<a class="headerlink" href="#purge-event-queue" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">purge-event-queue</span><span class="p">)</span></code></p>
<p>Removes all events currently queued for processing</p>
<h3 id="add-post-event-callback">add-post-event-callback<a class="headerlink" href="#add-post-event-callback" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">add-post-event-callback</span> <span class="nv">f</span><span class="p">)</span></code></p>
<p><code class="highlight"><span class="p">(</span><span class="nf">add-post-event-callback</span> <span class="nv">id</span> <span class="nv">f</span><span class="p">)</span></code></p>
<p>Registers the given function <code>f</code> to be called after each event is processed.</p>
<p><code>f</code> will be called with two arguments:</p>
<ul>
<li><code>event</code>: a vector. The event just processed.</li>
<li><code>queue</code>: a PersistentQueue, possibly empty, of events yet to be processed.</li>
</ul>
<p>This facility is useful in advanced cases like:</p>
<ul>
<li>you are implementing a complex bootstrap pipeline</li>
<li>you want to create your own handling infrastructure, with perhaps multiple
     handlers for the one event, etc.  Hook in here.</li>
<li>libraries providing 'isomorphic javascript' rendering on  Nodejs or Nashorn.</li>
</ul>
<p><code>id</code> is typically a keyword. If it supplied when an <code>f</code> is added, it can be
subsequently be used to identify it for removal. See <code>remove-post-event-callback</code>.</p>
<h3 id="remove-post-event-callback">remove-post-event-callback<a class="headerlink" href="#remove-post-event-callback" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">remove-post-event-callback</span> <span class="nv">id</span><span class="p">)</span></code></p>
<p>Unregisters a post event callback function, identified by <code>id</code>.</p>
<p>Such a function must have been previously registered via <code>add-post-event-callback</code></p>
<h2 id="deprecated">Deprecated<a class="headerlink" href="#deprecated" title="Permanent link">&para;</a></h2>
<h3 id="register-handler">register-handler<a class="headerlink" href="#register-handler" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">register-handler</span> <span class="o">&amp;</span> <span class="nv">args</span><span class="p">)</span></code></p>
<p>Deprecated. Use <code>reg-event-db</code> instead.</p>
<h3 id="register-sub">register-sub<a class="headerlink" href="#register-sub" title="Permanent link">&para;</a></h3>
<p><code class="highlight"><span class="p">(</span><span class="nf">register-sub</span> <span class="o">&amp;</span> <span class="nv">args</span><span class="p">)</span></code></p>
<p>Deprecated. Use <code>reg-sub-raw</code> instead.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
    <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav
        class="md-footer-nav__inner md-grid"
        aria-label="Footer"
      >

        <!-- Link to previous page -->
        
          <a
            href="../api-builtin-effects/"
            title="Builtin Effects"
            class="md-footer-nav__link md-footer-nav__link--prev"
            rel="prev"
          >
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Builtin Effects
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a
            href="../releases/2023/"
            title="2023"
            class="md-footer-nav__link md-footer-nav__link--next"
            rel="next"
          >
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2023
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2015-2021 Michael Thompson
          </div>
        
      </div>

      <!-- Social links -->
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/day8" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/wazound" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
    <script src="/re-frame/js/docs.js"></script>

    </div>
    
      <script src="../assets/javascripts/vendor.df0def68.min.js"></script>
      <script src="../assets/javascripts/bundle.ba57d267.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>